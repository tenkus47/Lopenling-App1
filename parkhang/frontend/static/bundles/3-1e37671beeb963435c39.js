(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[3],{1001:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1002:function(e,t,n){e.exports={TableContent:"TableOfContent---TableContent"}},1004:function(e,t,n){e.exports={title:"HomePage---title",list:"HomePage---list"}},1009:function(e,t,n){e.exports={voteBtn:"embedingVote---voteBtn"}},1025:function(e,t,n){"use strict";n.r(t);var r={},o=(n.r(r),n.d(r,"HomePage",(function(){return La})),n.d(r,"Editors",(function(){return Ma})),n.d(r,"Vote",(function(){return Ha})),n.d(r,"NotFound",(function(){return za})),n(0)),i=n.n(o),a=(n(840),n(777)),l=n.n(a),c=(a=n(113),n(891)),s=n.n(c),u=n(79),d=(c=n(39),n(162)),f=n(764);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=Object(c.c)((function(e){function t(t){var r;t.preventDefault(),n.current instanceof HTMLInputElement&&(r=n.current.value,a((function(){e.searchChanged(r)})))}var n=i.a.createRef(),r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?p(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useTransition)(),2),a=(r[0],r[1]);return i.a.createElement(d.i,{sx:{bgcolor:"inherit"},className:s.a.textsSearchContainer},i.a.createElement("div",{className:s.a.textsSearch},i.a.createElement("form",{onSubmit:t},i.a.createElement("input",{style:{outline:"none",maxWidth:196},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:n}),i.a.createElement(d.j,{onClick:t,variant:"outlined",size:"small",sx:{minWidth:2}},i.a.createElement(f.x,null)))))})),m=n(3),y=n(14),g=Object(a.connect)((function(e){return{searchTerm:y.A(e),searchValue:e.ui.searchValue,textListWidth:y.Z(e)}}),(function(e){return{searchChanged:function(t){e(Object(m.Sb)(t))}}}))(h),b=(h=n(250),n.n(h)),v=n(793),w=n(780),x=(n(828),n(792)),O=(n(12),["ི","ུ","ེ","ོ"]),E=["ཀ","ག"];function S(e,t){t=1<arguments.length&&void 0!==t?t:null;var n,r=e.slice(-1),o="";return 3840<=(n=r).codePointAt(0)&&n.codePointAt(0)<=4095?"ང"===r?o+=e+"༌།":-1!==E.indexOf(r)||-1!==O.indexOf(r)&&-1!==E.indexOf(e.charAt(e.length-2))?o+=e:o+=e+"།":(o=e,t&&(o+=t)),o}h=n(845);var T=n.n(h),j=(h=n(778),n.n(h)),I=(h=n(830),n.n(h));function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);n=t?(n=C(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===A(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new j.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var d=0;d<a.length;d++){var f=a[d];l<=s&&s<c&&(u+=f),s+=f.length}0<u.length&&(n=I()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&P(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);n=t?(n=W(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:T.a.searchTotal},e)}}])&&B(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),L=n(158),M=(h=n(906),n.n(h));function H(e){return e=e.loading?i.a.createElement("span",null,i.a.createElement(L.a,{id:"leftbar.loading"})):i.a.createElement("span",null,i.a.createElement(L.a,{id:"leftbar.loadMore"})),i.a.createElement("div",{className:M.a.container},e)}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}h=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);n=t?(n=U(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===z(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return F(r)}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).cache=new w.b({fixedWidth:!0,defaultHeight:60,minHeight:60}),e.rowRenderer=e.rowRenderer.bind(F(e)),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,r=e.index,i=e.parent,a=(e=e.style,this.props.selectedText),l=a?a.id:-1,c=this.props.selectedSearchResult,s=this.props.texts,u=this.props.onSelectedText,f=this.props.onSelectedSearchResult,p=this.props.searchTerm,h=this.props.searchResults,m=T.a.textListRow,y=s[r],g=(l=(y.id===l&&(m=b()(m,T.a.selectedRow)),S(y.name)),o.createElement("span",{className:T.a.textName},l)),v=[],x=null,O=!1,E=!1;0<p.length&&(g=o.createElement(R,{string:l,stringClass:T.a.textName,highlightClass:T.a.highlight,searchTerm:p}),h.hasOwnProperty(y.id)&&(v=h[y.id].results,O=h[y.id].extra,E=h[y.id].loading,x=o.createElement(D,{count:h[y.id].total,extra:O}))),l=this.cache,h=[];return 0<v.length&&(h=v.map((function(e){var t=c&&c.textId===y.id&&c.start===e[0],n=t?T.a.selectedSearchResult:T.a.searchResult;return t&&console.log("got selected result: %o",e),o.createElement(d.i,{key:y.id+"_"+e[0],onClick:function(){f(y,e[0],p.length,a)},sx:{bgcolor:"inherit",color:"inherit"},className:n},o.createElement(R,{string:e[1],highlightClass:T.a.highlight,searchTerm:p}))}))),o.createElement(w.a,{columnIndex:0,key:n,parent:i,rowIndex:r,cache:l},o.createElement("div",{key:n,style:e,className:m},o.createElement("div",{className:T.a.textNameRow,onClick:function(){u(s[r])}},g," ",x),0<v.length&&o.createElement("div",{className:T.a.searchResults},h),O&&o.createElement("div",{className:T.a.loadMore,onClick:function(){t.props.onSearchText(y,p)}},o.createElement(H,{loading:E}))))}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return o.createElement("div",{className:T.a.textList},this.props.texts&&0<this.props.texts.length?o.createElement(v.a,null,(function(n){var r=n.height;n=n.width;return o.createElement(x.a,{ref:function(t){return e.list=t},height:r,rowCount:t,rowHeight:e.cache.rowHeight,rowRenderer:e.rowRenderer,width:n,overscanRowCount:3,deferredMeasurementCache:e.cache})})):this.props.searching?o.createElement("div",{className:T.a.textListLoader},o.createElement(l.a,{loaded:!this.props.searching,scale:.5}),o.createElement("p",{className:T.a.searching},"Searching…")):o.createElement("ul",{className:"textList"}))}}])&&q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);var Q=n(94),G=Object(a.connect)((function(e){var t=y.A(e),n=y.y(e,t),r=y.C(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText:Object(y.G)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(m.Ic(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(m.Gc(t.id,n,r)):e(Object(Q.batchActions)([m.Gc(t.id,n,r),m.Ic(t)]))},onSearchText:function(t,n){e(m.Bc(t.id,n))}}}))(h),$=(h=n(907),n.n(h)),K=(h=(Object(a.connect)((function(e){return{textListIsVisible:Object(y.Y)(e)}}),(function(e){return{tabClicked:function(){e(Object(m.Xb)(!0))}}}))((function(e){var t=[$.a.tab];return e.textListIsVisible?t.push($.a.hideTab):t.push($.a.showTab),i.a.createElement("div",{className:b.a.apply(void 0,t),onClick:e.tabClicked},"Text List")})),n(254),n(795)),n.n(h)),Y=(h=n(908),n.n(h));n(909),n(910),h=Object(a.connect)((function(e){return{Textdata:y.ab(e),selectedText:y.G(e)}}),(function(e){return{}}))((function(e){var t=e.Textdata,n=e.selectedText;return n?(e=t.detail.find((function(e){return e.text===n.id})))?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.T,{variant:"h4",component:"div",mb:3},i.a.createElement(L.a,{id:"Resource.About"})),i.a.createElement(d.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(d.c,{sx:{fontWeight:"bold"},expandIcon:i.a.createElement(f.l,null)},i.a.createElement(L.a,{id:"text.title"})),i.a.createElement(d.b,null,e.title)),i.a.createElement(d.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(d.c,{expandIcon:i.a.createElement(f.l,null)},i.a.createElement(L.a,{id:"text.description"})),i.a.createElement(d.b,null,e.description))):i.a.createElement("div",null,"No about info"):i.a.createElement("div",null,"no selected Text available")})),n(911);var J=Object(a.connect)((function(e){var t=y.t(e);return{alignmentData:y.i(e),selectedMedia:t,showPageImages:y.wb(e)}}),(function(e){return{changedShowPageImages:function(t){e(m.Ub(t))},changeMediaSelection:function(t){return e(m.xc(t))},onSelectedSearchResult:function(t,n,r){e(m.Gc(t,n,r))}}}))((function(e){function t(t){e.changeMediaSelection(t)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.T,{variant:"h6",gutterBottom:!0,component:"div"},"Media"),i.a.createElement(d.y,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"}},i.a.createElement(d.z,{selected:e.showPageImages,onClick:function(){return e.changedShowPageImages(!e.showPageImages)}},i.a.createElement(d.A,null,i.a.createElement(f.o,null)),i.a.createElement(d.B,{primary:"Image"})),i.a.createElement(d.z,{selected:e.selectedMedia.isVideoVisible,onClick:function(){return t("VIDEO")}},i.a.createElement(d.A,null,i.a.createElement(f.t,null)),i.a.createElement(d.B,{primary:"Video"})),i.a.createElement(d.z,{selected:e.selectedMedia.isAudioVisible,onClick:function(){return t("AUDIO")}},i.a.createElement(d.A,null,i.a.createElement(f.a,null)),i.a.createElement(d.B,{primary:"Audio"}))))}));function X(e){var t=e.topicId;return Object(o.useEffect)((function(){var e;t&&(window.DiscourseEmbed={discourseUrl:"https://lopenling.org/",topicId:t},(e=document.createElement("script")).type="text/javascript",e.async=!0,e.src=function(e){var t=window.DiscourseEmbed||{};if(e=document.getElementById("discourse-comments-".concat(e))){var n=function(e){return e.replace(/^https?(\:\/\/)?/,"")},r=document.createElement("iframe"),o=(["discourseUrl","discourseEmbedUrl","discourseUserName","discourseReferrerPolicy"].forEach((function(e){window[e]&&(t[e]=t[e]||window[e])})),{}),i=(t.discourseEmbedUrl&&(t.discourseEmbedUrl.startsWith("/")&&console.error("discourseEmbedUrl must be a full URL, not a relative path"),o.embed_url=encodeURIComponent(t.discourseEmbedUrl)),t.discourseUserName&&(o.discourse_username=t.discourseUserName),t.topicId&&(o.topic_id=t.topicId),t.discourseUrl+"embed/comments"),a=Object.keys(o);if(0<a.length){i+="?";for(var l=0;l<a.length;l++){0<l&&(i+="&");var c=a[l];i+=c+"="+o[c]}}r.src=i,r.id="discourse-embed-frame",r.width="100%",r.frameBorder="0",r.scrolling="no",r.referrerPolicy=t.discourseReferrerPolicy||"no-referrer-when-downgrade",e.appendChild(r),window.addEventListener("message",(function(e){e&&n(t.discourseUrl).includes(n(e.origin))&&e.data&&("discourse-resize"===e.data.type&&e.data.height&&(r.height=e.data.height+"px"),"discourse-scroll"===e.data.type&&e.data.top&&(e=function(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e.offsetParent;)e=e.offsetParent;else e.y&&(t+=e.y);return t}(r)+e.data.top,window.scrollTo(0,e)))}),!1)}}(t),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e))}),[]),t?i.a.createElement("div",{id:"discourse-comments-".concat(t)}):i.a.createElement("div",null,"Topic unavailable")}function Z(e){var t=void 0===(t=e.category)?"":t;e=void 0===(e=e.perPage)?5:e;return i.a.useEffect((function(){for(var e=document.querySelectorAll("#topics"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("url");if(r&&0!==r.length){var o="de-"+Math.random().toString(36).substr(2,9),i=["discourse_embed_id="+o];n.removeAttribute("discourse-url");for(var a=0;a<n.attributes.length;a++){var l=n.attributes[a];i.push(l.name.replace("-","_")+"="+l.value)}var c=document.createElement("iframe");c.src=r+"/embed/topics?"+i.join("&"),c.id=o,c.frameBorder=0,c.scrolling="no",c.width="100%",n.appendChild(c)}else console.error("Error, `discourse-url` was not found")}}),[]),i.a.createElement("div",{id:"topics",url:"https://lopenling.org/",style:{maxHeight:"70vh",overflow:"scroll"},"per-page":e,category:t,template:"complete",status:"open","allow-create":"true"})}n(912),window.addEventListener("message",(function(e){var t;e&&e.data&&"discourse-resize"===e.data.type&&e.data.embedId&&(t=document.getElementById(e.data.embedId))&&(t.height=e.data.height+"px")}),!1);var ee={About:h,Resources:J,FullTextSearch:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,null),i.a.createElement(G,null))},Discussion:function(){return i.a.createElement(i.a.Fragment,null," ",i.a.createElement(d.T,{variant:"h6",gutterBottom:!0,component:"div"},"Discussions"),i.a.createElement(Z,{category:"55",perPage:"5"}))}},te=n(786),ne=n(710),re=["children","value","index"];function oe(){return(oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?ae(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le=Object(a.connect)((function(e){return{isSecondWindowOpen:y.ub(e)}}))((function(e){var t=(l=ie(Object(te.a)("selectedResources",0),2))[0],n=l[1],r=(l=ie(Object(o.useState)(!1),2))[0],a=l[1],l=(i.a.useEffect((function(){var t=setTimeout((function(){e.isSecondWindowOpen&&window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(t)}}),[r]),Object(ne.a)());return i.a.createElement(d.i,{sx:{width:r?"100%":"45px",bgcolor:"background.default",position:e.isSecondWindowOpen?"relative":"absolute",borderRight:"light"===l.palette.mode?"2px solid lightgray":"2px solid #d3d3d3"},className:Y.a.sidebar},i.a.createElement(d.i,{className:Y.a.sidebar_header},i.a.createElement(d.T,{className:Y.a.menu_title,sx:r?{width:"fit-content",opacity:1}:{width:"0",opacity:0}},"Menu"),i.a.createElement("div",{onClick:function(){a((function(e){return!e}))},style:{cursor:"pointer",zIndex:1}},r?i.a.createElement(f.i,null):i.a.createElement(f.s,null))),i.a.createElement(d.i,{sx:{borderBottom:1,display:"flex"},className:Y.a.optionlist},i.a.createElement(d.P,{value:t,sx:{flex:1},onChange:function(e,t){n(t)},orientation:r?"horizontal":"vertical","aria-label":"basic tabs example"},i.a.createElement(d.O,oe({style:{minWidth:0,flex:1},onClick:function(){return a(!0)},icon:i.a.createElement(f.p,null)},ce(0))),i.a.createElement(d.O,oe({style:{minWidth:0,flex:1},icon:i.a.createElement(f.v,null),onClick:function(){return a(!0)}},ce(1))),i.a.createElement(d.O,oe({style:{minWidth:0,flex:1},icon:i.a.createElement(f.b,null),onClick:function(){return a(!0)}},ce(2))),i.a.createElement(d.O,oe({style:{minWidth:0,flex:1},icon:i.a.createElement(f.m,null),onClick:function(){return a(!0)}},ce(3))))),r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(se,{value:t,index:0},i.a.createElement(ee.About,null)),i.a.createElement(se,{value:t,index:1},i.a.createElement(ee.Resources,null)),i.a.createElement(se,{value:t,index:2},i.a.createElement(ee.FullTextSearch,null)),i.a.createElement(se,{value:t,index:3},i.a.createElement(ee.Discussion,null))))}));function ce(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function se(e){var t=e.children,n=e.value,r=e.index;e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,re);return i.a.createElement("div",oe({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},e,{style:{flex:1,display:n==r?"flex":"none",flexDirection:"column"}}),n===r&&i.a.createElement("div",{className:Y.a.listContainer},t))}h=n(913);var ue=n.n(h),de=(J=n(206),n.n(J)),fe=(h=n(914),n.n(h)),pe=(J=n(782),n.n(J)),he=(h=n(925),n.n(h)),me=(J=n(944),n.n(J));function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge="2MMM_ggekfE";function be(e){var t=[me.a.time_stamp];return e.active&&t.push(me.a.active_stamp),i.a.createElement(d.i,{className:b()(t),onClick:function(){e.jumpToTime(e.startTime),e.setActive()}},e.active===e.index&&i.a.createElement("div",{className:me.a.dot}),i.a.createElement(d.i,{className:me.a.image},i.a.createElement("img",{src:e.img,alt:"timestamp image"})),i.a.createElement(d.i,{className:me.a.chapter_info},i.a.createElement(d.i,{className:me.a.topic},i.a.createElement("div",null,e.topic),e.active&&i.a.createElement(d.x,{target:"_blank",href:"https://youtu.be/".concat(ge,"?t=").concat(function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}(e.startTime))},i.a.createElement(f.u,null))),i.a.createElement(d.i,{className:me.a.startTime},e.startTime)))}var ve=Object(a.connect)((function(e){var t=y.hb(e);return{isPanelLinked:y.sb(e),videoData:t.alignment,mediaInterval:y.u(e)}}),(function(e){return{changeMediaInterval:function(t){e(m.Dc(t))},changeScrollToId:function(t){return e(m.Jb(t))}}}))((function(e){var t=e.videoData.indexOf(e.mediaInterval),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?ye(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(0),2),r=n[0],a=n[1];return i.a.useEffect((function(){a(t=-1===t?0:t)}),[t]),i.a.useEffect((function(){e.changeMediaInterval(e.videoData[r]),e.isPanelLinked&&e.changeScrollToId({id:e.mediaInterval.source_segment.start||null,from:"video"})}),[r]),i.a.createElement(d.a,{sx:{border:"#eee 1px solid",maxHeight:"80vh"}},i.a.createElement(d.c,{expandIcon:i.a.createElement(f.l,null),"aria-controls":"video-chapter-content",id:"chapter-accordion"},i.a.createElement(d.T,null,"Chapters")),i.a.createElement(d.b,{sx:{position:"relative",overflow:"scroll",maxHeight:"250px"}},e.videoData.map((function(t,n){return i.a.createElement(d.i,{key:t.source_segment.start},i.a.createElement(be,{img:"//img.youtube.com/vi/"+ge+"/0.jpg",topic:"first chapter of chojuk asdfa sdfasdfasdf asfdas dfasdfasdd dfsdfsd sdfs s",startTime:t.target_segment.start,active:r===n,setActive:function(){return a(n)},jumpToTime:e.jumpToTime}))}))))}));function we(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ee(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=Object(a.connect)((function(e){var t=y.x(e),n=y.Q(e),r=y.hb(e),o=y.t(e),i=y.G(e),a=y.i(e),l=y.K(e,i.id);return{isPanelLinked:y.sb(e),scrollToId:t,syncIdOnClick:n,videoData:r,selectedMedia:o,selectedText:i,alignmentData:a,witness:l,mediaInterval:y.u(e)}}),(function(e){return{toggleImage:function(t){return e(m.Ub(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(m.Gc(t.id,n,r)):e(batchActions([m.Gc(t.id,n,r),m.Ic(t)]))},changeMediaSelection:function(t){return e(m.xc(t))},changeMediaInterval:function(t){e(m.Dc(t))},changeSelectedRange:function(t){e(m.Kb(t))}}}))((function(e){var t,n=e.alignmentData.text,r=e.syncIdOnClick,a=Object(o.useRef)(),l=(null==e||null==(s=e.videoData)?void 0:s.alignment)||[],c=[],s=Oe(Object(o.useState)({played:0,duration:0,playing:!0}),2),u=s[0],f=s[1],p=(pe()(l)||(c=l.map((function(e){return[parseInt(e.source_segment.start),parseInt(e.source_segment.end)]}))),Object(o.useEffect)((function(){var o,i;n===e.selectedText.id&&e.isPanelLinked&&(o=r,(t=c.find((function(e){var t=(e=Oe(e,2))[0];e=e[1];return t<o&&o<e})))&&(i=l.find((function(e){return e.source_segment.start===(null==(e=t[0])?void 0:e.toString())})),pe()(i)||(p(i.target_segment.start),e.changeMediaInterval(i))))}),[r]),function(e){a.current.seekTo(Te(e),"seconds")});return 0===l.length||e.videoData.source.witness!==parseInt(e.witness)?i.a.createElement("div",null):i.a.createElement(d.r,{in:e.open},i.a.createElement(he.a,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%",objectFit:"contain"},width:"400px",height:"250px",ref:a,controls:!0,onDuration:function(e){return f(xe(xe({},u),{},{duration:e}))},playing:!0,onPlay:function(){return f(xe(xe({},u),{},{playing:!0}))},onPause:function(){return f(xe(xe({},u),{},{playing:!1}))},onError:function(){return console.log("error in media sec")},onSeek:function(e){return console.log("onSeek",e)},onProgress:function(t){var n=t.playedSeconds;t=l.find((function(e){return Te(e.target_segment.start)<n&&Te(e.target_segment.end)>n}));pe()(t)||e.changeMediaInterval(t)}}),i.a.createElement(ve,{jumpToTime:p}))}));function Te(e){return 60*+(e=(0<arguments.length&&void 0!==e?e:"").split(":"))[0]*60+60*+e[1]+ +e[2]}var je=n(945),Ie=n(33);function Ae(e){var t=Object(Ie.a)(),n=i.a.useRef(null);return i.a.createElement(d.r,{in:e.open},i.a.createElement(je.a,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e){return i.a.createElement(fe.a,{handle:"#draggable-dialog-title",bounds:"parent"},i.a.createElement(d.H,e))}var Ce=Object(a.connect)((function(e){return{selectedMedia:y.t(e)}}),(function(e){return{changeMediaSelection:function(t){return e(m.xc(t))}}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Pe(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(!1),2),n=t[0],r=t[1];return i.a.createElement(ke,{sx:{position:"absolute",zIndex:1,right:0,maxWidth:"400px"}},i.a.createElement("div",{className:"Resizable-media-div"},i.a.createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},i.a.createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),i.a.createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),i.a.createElement("div",{className:"buttons-hide-close"},i.a.createElement(d.v,{onClick:function(){r((function(e){return!e}))},disableRipple:!0},n?"+":"-"),i.a.createElement(d.v,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},i.a.createElement(f.i,null)))),i.a.createElement(i.a.Fragment,null,e.selectedMedia.isVideoVisible&&i.a.createElement(Se,{open:!n,setOpen:r}),e.selectedMedia.isAudioVisible&&i.a.createElement(Ae,{open:!n,setOpen:r}))))}));function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Be(t,e);var n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);n=t?(n=Ne(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Re(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e){if(this instanceof o)return(e=r.call(this,e)).state={hasError:!1},e;throw new TypeError("Cannot call a class as a function")}return t=o,e=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong."):this.props.children}}])&&_e(t.prototype,n),e&&_e(t,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a.Component),De=n(947),Le=(h=(n(950),n(835)),n.n(h)),Me=(J=n(861),n.n(J)),He=(h=n(348),n.n(h)),ze=(J=n(787),n.n(J)),qe=(h=n(862),n.n(h)),Ve=(J=n(863),n.n(J)),Fe=n(70),Ue=Object(o.memo)(Object(c.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),pe()(t)&&!e.activeWitness?null:i.a.createElement(d.F,{onChange:function(n){pe()(t)||e.onSelectedWitness(t[n.target.value])},className:Ve.a.selectVersion,value:r,label:"Version2",classes:{root:Ve.a.selectEmpty,select:Ve.a.selectOptions}},t.map((function(t,r){var a;return t.id===(null==(a=e.activeWitness)?void 0:a.id)&&o.push(Ve.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:Ve.a.selectOptions},n)})))}))),Qe=n(791),Ge=(h=n(866),n.n(h));function $e(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){var n;if(e)return"string"==typeof e?Je(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}J=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=Ke(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=Ke(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,u=(p=Ke(Object(o.useState)(!1),2))[0],f=p[1],p=null==s?void 0:s.name,h=(s=e.selectedText1,Object(o.useEffect)((function(){var e;""===a&&r($e(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r($e(e)))}),[a]),Object(o.useRef)(new Qe.c({fixedHeight:!0,defaultHeight:40}))),m=[Ge.a.textlist],y=i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(Qe.b,{key:"optionvalues-".concat(t),cache:h.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){f(!1),c(a)}},i.a.createElement(d.i,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(d.T,{noWrap:!0},S(a.name)))))}),[n]);return i.a.createElement(d.q,{onClickAway:function(){return f(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(d.j,{onClick:function(){f((function(e){return!e})),!1===u&&m.push(Ge.a.open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"},disabled:null===s},i.a.createElement(d.T,{noWrap:!0},p||"select Text here")),i.a.createElement(d.u,{in:u},i.a.createElement(d.i,{className:b()(m),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(d.Q,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),i.a.createElement(Qe.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(Qe.d,{width:t,height:e,rowHeight:40,deferredMeasurementCache:h.current,rowCount:n.length,rowRenderer:y})}))))))}));var Xe,Ze=Object(a.connect)((function(e){var t=y.A(e),n=y.y(e,t),r=y.C(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText1:Object(y.G)(e),selectedText:Object(y.H)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(m.Jc(t))}}}))(J);function et(){return(et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function tt(e){return i.a.createElement("svg",et({viewBox:"0 0 512 512"},e),Xe=Xe||i.a.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}))}function nt(e){var t=new Array(34).fill().map((function(e,t){return t=14+t,i.a.createElement("option",{value:t,key:t},t)}));return i.a.createElement("div",{className:rt.a.fontSize},i.a.createElement("label",{htmlFor:"fontSize"},"Font Size"),i.a.createElement("select",{value:e.fontSize,onChange:function(t){var n=event.target;n=Number(n.value);e.onChange(n)}},t))}h=n(973);var rt=n.n(h);function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?it(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e){var t=ot(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=ot(Object(te.a)("WindowTwoFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",a)}),[]),i.a.createElement(d.q,{onClickAway:function(){return r(!1)}},i.a.createElement(d.i,{position:"relative"},i.a.createElement(d.v,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(tt,{height:20,width:20,fill:"currentColor"})),i.a.createElement(d.u,{in:n},i.a.createElement(d.E,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(nt,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(d.t,null),i.a.createElement(lt,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:a}),i.a.createElement(d.D,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&i.a.createElement(f.e,null))))))}var lt=function(e){var t=e.selectFont,n=(e=e.selectedfont,u.c||[]);return i.a.createElement(d.i,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function ct(e){return e=e.handleWindowSearch,i.a.createElement(d.v,{size:"small",variant:"text",onClick:e},i.a.createElement(f.x,null))}function st(e){return i.a.createElement(i.a.Fragment,{key:"right"},i.a.createElement(d.v,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?i.a.createElement(f.h,null):i.a.createElement(f.s,null)))}function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);n=t?(n=pt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ut(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new j.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var d=0;d<a.length;d++){var f=a[d];l<=s&&s<c&&(u+=f),s+=f.length}0<u.length&&(n=I()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&dt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),mt=(J=n(974),n.n(J));function yt(e){function t(e){var t=e.key,o=e.index,c=e.parent,u=(e=e.style,a[o]);return i.a.createElement(Qe.b,{key:"listkeys2-".concat(t),cache:s.current,parent:c,columnIndex:0,rowIndex:o},i.a.createElement("div",{style:e},0<a.length&&i.a.createElement("div",{className:mt.a.searchListItem,onClick:function(){return n(l,u[0],r.length,l)}},i.a.createElement(ht,{string:u[1],highlightClass:mt.a.highlight,searchTerm:r}))))}var n=e.onSelectedSearchResult,r=e.searchValue,a=e.results,l=e.selectedText,c=Object(o.useRef)(),s=Object(o.useRef)(new Qe.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(Qe.d,{ref:c,height:n,rowCount:null==a?void 0:a.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?bt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt=Object(a.connect)((function(e){var t,n=y.gb(e),r=y.H(e),o=[],i=(r&&(o=y.cb(e,r.id),t=(t=y.L(e,r.id))?y.jb(e,t):y.nb(e,r.id)),y.X(e)),a=Object(y.O)(e),l=y.B(e);return{witnesses:o,selectedText:r,selectedWitness:t,textListIsVisible:Object(y.Y)(e),accountOverlayVisible:Object(y.e)(e),textFontSize:i,user:n,searchValue:l,showTableContent:a,searchResults:y.z(e,l)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return wt(wt(wt({},n),e),{},{navigationButtonClicked:function(){t.dispatch(m.Xb(!e.textListIsVisible))},onSelectedWitness:function(e){r(m.Lc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(m.Wb(e))},changeShowTableContent:function(e){r(m.Pc(e))},searchChanged:function(e){r(m.Tb(e))},changeSelectSyncId:function(e){},onSelectedSearchResult:function(e,t,n,o){o&&o.id===e.id?r(m.Hc(e.id,t,n)):r(batchActions([m.Hc(e.id,t,n),m.Jc(e)]))}})}))((function(e){var t=(u=gt(Object(o.useState)(""),2))[0],n=u[1],r=(u=gt(Object(o.useState)(!1),2))[0],a=u[1],l=(u=gt(Object(o.useState)(!1),2))[0],c=u[1],s=Object(o.useRef)(),u=Object(o.useRef)(),p=i.a.useRef(ze()((function(t){e.searchChanged(t)}),1e3)).current,h=Object(o.useCallback)((function(e){e.preventDefault(),p(t),c(!0)}),[t]),m=Object(o.useCallback)((function(){a(!r)}),[r]),y=(Object(o.useEffect)((function(){!0===r&&s.current.focus(),!1===r&&p(null)}),[r]),He()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)),g=y?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(d.N,{direction:"column",ref:u,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(d.N,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(d.i,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Ze,null),i.a.createElement(Ue,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(d.k,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:qe.a.button_group_menu},i.a.createElement(ct,{handleWindowSearch:m}),i.a.createElement(at,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(st,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(d.r,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:h},i.a.createElement(d.N,{direction:"row",spacing:2,position:"relative"},i.a.createElement(d.Q,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:s,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(d.j,{variant:"outlined",size:"small",onClick:h,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(d.i,{sx:((u="boxShadow")in(h={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:m=3,overflowX:"hidden"})?Object.defineProperty(h,u,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[u]=m,h)},0===g.length&&i.a.createElement("p",null,"no such word present"),y&&0<g.length&&i.a.createElement(yt,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:g,selectedText:e.selectedText}),i.a.createElement(d.v,{"aria-label":"closeButton",onClick:function(){c(!1),p(null),n("")},size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(f.i,{fontSize:"inherit"})))))))})),Ot=n(133),Et=n(81);function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tt=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var r=e.segments,o=0,i=[],a=0;a<n.length;a++){var l=n[a],c=(l=e.indexOfSegmentAtPosition(l-1),void 0);c=a==n.length-1?r.slice(o):r.slice(o,l+1),c=new Ot.a(c);i.push(c),o=l+1,0<=l&&(c=r[l],this._textsFinalPositions.push(c.end))}this._texts=i.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,o=0;o<t.length;o++){var i=t[o];if(n<=e&&e<=i){r=o;break}n=i}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&St(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),jt=n(255),It=(h=n(867),n.n(h)),At=(J=n(4),n(757));function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kt=Object(J.a)("div")((function(e){return Pt({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(At.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(At.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),Ct=Object(J.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Rt=Object(J.a)(d.w)((function(e){return{color:"inherit","& .MuiInputBase-input":Pt({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));function _t(){return i.a.createElement(d.i,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(d.R,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(d.T,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(kt,null,i.a.createElement(Ct,null,i.a.createElement(f.x,null)),i.a.createElement(Rt,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(d.i,null,[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}].map((function(e,t){return i.a.createElement(d.i,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}h=n(868);var Bt=n.n(h),Nt=(h=n(62),n.n(h)),Wt=(h=n(869),n.n(h)),Dt=n(48),Lt=n(35);h=n(1018);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?zt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return(Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gt=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ut(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qt(e);n=t?(n=Qt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Mt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Vt(Vt({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],r=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.condition){var o=parseInt(e.id.replace("s2_","")),i=(this.props.changeSyncIdOnClick(o),this.props.changeScrollToId({id:"ua",from:"ua"}),parseInt(e.id.replace("s2_",""))),a=this.textAlignmentById.find((function(e){return i>=e.TStart&&i<e.TEnd}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r='<p class="'+Wt.a.textLine+'">';if(0===n.length)return{__html:r};for(var o=n[n.length-1].end+1,i=Wt.a.highlight,a=Wt.a.activeHighlight,l=null,c=0;c<n.length;c++){var s=n[c],u="",d=[];if(s.start===o)break;var f,p=null,h=(0!==s.length&&(p="s2_"+s.start),null!=(f=e.selectedTargetRange)&&f.includes(s.start)&&e.condition&&(f="light"===e.theme.palette.mode?Wt.a.selectedRangelight:Wt.a.selectedRangeDark,d.push(f)),0<d.length&&(u='class="'+b.a.apply(void 0,d)+'"'),s.text);if(e.searchStringPositions){var m=s.start,y=m,g=(h="",i);e.selectedSearchResult&&e.selectedSearchResult.start<=y&&e.selectedSearchResult.start+e.selectedSearchResult.length>y&&(g=a);for(var v=0;v<s.text.length;v++){var w,x,O,E=s.text.charAt(v);y=m+v;l?((w=Ht(l,2))[0],0===v&&(h+='<span class="'+g+'">'),y===w[1]?(h+=E+"</span>",l=null):v===s.text.length-1?h+=E+"</span>":h+=E):y in e.searchStringPositions?(x=(w=Ht(e.searchStringPositions[y],2))[0],O=w[1],h+='<span class="'+g+'">'+E,v!==s.text.length-1&&y!==O||(h+="</span>"),y<O&&(l=[x,O])):h+=E}}r+="<span id="+p+" key="+p+" "+u+">"+h+"</span>"}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&this._renderedHtml!==t&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Wt.a.text],n=(0===this.props.row&&t.push(Wt.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Wt.a.textContainer},i.a.createElement("div",{className:b.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}])&&Ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),$t=Object(h.a)(Gt),Kt=(Gt=n(870),n.n(Gt));function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?tn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t){return(rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ln={},cn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=an(e);n=t?(n=an(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Yt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return on(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.condition=e.condition,t.list=null,t.splitText=null,t.cache=new w.b({fixedWidth:!0}),t.rowRenderer=t.rowRenderer.bind(on(t)),t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(on(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),pe()(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Bt()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=ze()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=ze()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.splitText.style.scrollBehavior="smooth",this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidUpdate",value:function(e,t){var n,r,o,i=this,a=this.props.scrollToId,l=(this.targetId2=this.props.syncIdOnClick,this.selectedWindow=this.props.selectedWindow,this.list,this.props.searchResults,this.props.textAlignment);this.condition=this.props.condition,!this._didSetInitialScrollPosition&&this.list&&(n=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(r=this.getSelectedTextIndex(),setTimeout((function(){n.scrollToRow(r),setTimeout((function(){n.scrollToPosition(n.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),1===this.selectedWindow&&1===a.from&&this.condition&&null!==a.id&&(this.textAlignmentById=this.props.textAlignmentById||[],l&&null!==(o=null==(o=this.textAlignmentById.find((function(e){return e.start===a.id})))?void 0:o.TStart)&&(o=this.props.splitText.getTextIndexOfPosition(o),this.scrollToIndex(o))),this.targetId2&&null===a.from&&1===this.selectedWindow&&null===a.id&&this.condition&&(o=null==(o=l.alignment.find((function(e){return i.targetId2>=e.source_segment.start&&i.targetId2<e.source_segment.end})))||null==(l=o.target_segment)?void 0:l.start,l=this.props.splitText.getTextIndexOfPosition(o),this.scrollToIndex(l))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=en(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof Dt.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=en(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===ANNOTATION_TYPES.pageBreak&&--c,s.type===ANNOTATION_TYPES.lineBreak&&--c;var u=c+s.length;0<s.length&&--u,n=e.splitText.getTextIndexOfPosition(u),i=t.getBoundingClientRect()}var d=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){d=e.selectedAnnotatedSegments;for(var f=0;f<d.length;f++){var p=d[f];if(null===r&&p instanceof Dt.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=idForInsertion(r),idForInsertion):(o=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(s=new Dt.a(c,""),o=idForDeletedSegment(s),a=idForDeletedSegment,d=[r=s]):e.activeAnnotation.isInsertion?(u=en(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new Dt.a(u,""),o=idForInsertion(t),a=idForInsertion,d=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(s=new Dt.a(c+1,""),u=new Dt.a(c,""),d=[r=s],l=[o=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new Dt.a(c+1,""),s=new Dt.a(c,""),d=[r=t],l=[o=idForLineBreak(s)]));if(a)for(var h=0;h<d.length;h++){var m=d[h];m instanceof Dt.a&&(m=a(m),l.push(m))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Kt.a.splitText,ref:function(t){return e.splitText=t},key:i,style:{cursor:"pointer"}},o.createElement(v.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(Qe.d,{ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((ln=ln.hasOwnProperty(r)?ln:Zt({},r,{}))[r].hasOwnProperty(t)||(ln[r]=Zt({},t,{})),ln[r][t].hasOwnProperty(n))return ln[r][t][n];for(var o=new j.a,i=e.getText(),a=e.segments[0].start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),d=0,f=null,p=0;p<u.length;p++){var h=u[p],m=d+(h.length-1);null!==f?f+(t.length-1)<=m&&(s[f+a]=[f+a,m+a],f=null):-1!==l.indexOf(d)?t.length===h.length?s[d+a]=[d+a,m+a]:t.length>h.length&&(f=d):f=null,d+=h.length}return ln[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l={},c=((c=this.props.searchValue)&&0<c.length&&i.splitText&&(l=this.getStringPositions(i.splitText.texts[n],c,n)),Xt(Xt({},e),{},{height:e.height+10}));return o.createElement(w.a,{columnIndex:0,parent:r,rowIndex:n,cache:a,key:t},o.createElement("div",{style:c,ref:this.splitTextRef,id:"index2_".concat(n),className:Kt.a.splitTextRow},o.createElement("div",{className:Kt.a.splitTextRowContent},o.createElement($t,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:l,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}])&&nn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);Gt=n(127);var sn=n.n(Gt),un=n(128);function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn,mn,yn,gn,bn={},vn={},wn=function(e,t){var n,r;return(t=y.jb(e,t))?(r=t.text,n=y.nb(e,r.id),r=y.o(e,r.id),n&&r?(e=(r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?dn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(vn.hasOwnProperty(t.id))return[vn[t.id].appliedAnnotations,vn[t.id].allAnnotations];t.text;var r=y.m(e,n.id),o=function(e,t,n){if(!y.qb(e,t))return{};var r=y.f(e,t);if(!r)return{};var o,i,a={};for(o in r)!r.hasOwnProperty(o)||(i=y.k(e,n,o))&&(a[i.unique_id]=i);return xn(e,a)}(e,t.id,n.id),i=null,a={};if(t.id!==n.id){i=y.w(e,t.id);var l,c,s={};for(l in r)r.hasOwnProperty(l)&&((c=r[l]).creator_witness!==t.id||i.hasOwnProperty(c.unique_id)?c.creator_witness===t.id&&(a[c.unique_id]=c):s[c.unique_id]=c);o=pn(pn({},xn(e,s)),o),r=s}return n=xn(e,r),a=xn(e,a),0<Object.keys(a).length&&(n=pn(pn({},n),a)),n=pn(pn({},o),n),n=sn()(n,(function(e,n){return!(t&&e.type===Lt.a.lineBreak&&e.creatorWitness.id!==t.id)})),y.pb(e,t.id)&&y.qb(e,t.id)&&(vn[t.id]={appliedAnnotations:o,allAnnotations:n}),[o,n]}(e,t,n),2))[0],r[1],r=function(e){return On[e.id]||(On[e.id]=Object(un.a)(e.content||"")),On[e.id]}(n),new Et.g(r,Object.values(e),(function(e){return Object(un.a)(e).segments}),n,t)):null):(console.warn("no witness"),null)},xn=function(e,t){var n,r,o={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=y.b(e,r))&&(o[n]=r));return o},On={};function En(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||jn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){var n;if(e)return"string"==typeof e?In(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function An(e){return[e.start,e.length].join("-")}Gt=Object(a.connect)((function(e){var t,n={},r=Object(y.X)(e),o=Object(y.H)(e),i={},a=(o&&(t=y.nb(e,o.id)||{},(a=y.L(e,o.id))&&(n=y.jb(e,a)),pe()(n)&&pe()(t),n=t),t=function(e,t){var n=null;return t&&(n=wn(e,t))&&(bn[t]=n),n}(e,null==(a=n)?void 0:a.id),e.data2.loadingWitnesses),l=(t&&(i=function(e,t){if(e===hn&&t===mn&&e.version===gn)return yn;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=Tn(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=An(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=INSERTION_KEY+a}i.isDeletion&&0<i.length&&(a=DELETION_KEY+a),i.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),i.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=An(i),r[o]=c)}}(o);return mn=t,yn=n,gn=(hn=e).version,n}(t,Object.values([]))),y.sb(e)),c=Object(y.x)(e),s=Object(y.Q)(e),u=Object(y.U)(e),d=Object(y.M)(e),f=Object(y.B)(e),p=y.ub(e),h=Object(y.p)(e);return{text:o,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:i,scrollToId:c,syncIdOnClick:s,textAlignment:u,textAlignmentById:Object(y.V)(e),selectedWindow:d,selectedSourceRange:Object(y.E)(e),selectedTargetRange:Object(y.F)(e),showTableContent:Object(y.O)(e),selectedSearchResult:Object(y.D)(e),searchResults:Object(y.z)(e,f),searchValue:f,condition:h&&l&&p}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function o(e){return-1!==e.indexOf("i2_")}function i(e){return!o(e)&&r(e)?e.substr(3):e.substr(2)}var a=e.annotatedText,l=e.annotationPositions,c=t.dispatch;return Sn(Sn(Sn({},n),e),{},{onChangedFontSize:function(e){c(m.Vb(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,c=[],s=[],u=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=jn(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(u.s();!(n=u.n()).done;){var d,f,p,h=n.value;r(h)||o(h)||(d=i(h),f=a.segmentedText.segmentAtPosition(d),s.push(f),(p=l[f.start])&&(c=c.concat(p)))}}catch(t){u.e(t)}finally{u.f()}c=Le()(c,(function(e,t){return e.toString()==t.toString()}));var m,y=Me()(c,a.annotations,(function(e,t){return e.toString()==t.toString()})),g=getSegmentsRange(s,y,c,e.annotatedText);g?(m=a.getBaseAnnotation(g.start,g.length),g.annotation||0<y.length&&(y=a.segmentedText.segmentsInRange(g.start,g.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),m.start,m.length,y,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return c(m.Jb(e))},changeSyncIdOnClick:function(e){c(m.Mb(e))},changeSelectedWindow:function(e){c(m.Lb(e))},changeSelectedRange:function(e){c(m.Kb(e))},changeShowTableContent:function(e){c(m.Pc(e))},selectedSegmentId:function(t){var n=i(t),a=n;o(t)?a=INSERTION_KEY+n:r(t)?a=DELETION_KEY+n:-1!==t.indexOf("p2_")?a=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(a=LINE_BREAK_KEY+n),l[a],e.activeAnnotation&&e.activeAnnotation&&(t=m.Rb(null),c(t))}})}))((function(e){var t=Object(o.useRef)(),n={name:""};function r(){n.name&&e.changeSelectedWindow(2)}e.text&&(n=e.text),Object(o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",r),function(){e.removeEventListener("mouseenter",r)}}),[]);var a=null,c=e.selectedWindow,s=[e.annotatedText&&e.text&&!e.loading?(s=e.paginated?positionSplitter(e.pageBreaks):Object(jt.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),a=new Tt(e.annotatedText,s),i.a.createElement(cn,{splitText:a,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,selectedSearchResult:e.selectedSearchResult,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:c,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,condition:e.condition})):i.a.createElement("div",{key:Math.random()})];return i.a.createElement(d.i,{ref:t,className:It.a.textDetail,sx:{height:"100%",flex:1,bgcolor:"heading.main",color:"texts.main"}},i.a.createElement(xt,null),i.a.createElement(d.t,null),i.a.createElement(l.a,{loaded:!e.loading,zIndex:5}),i.a.createElement(d.i,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},i.a.createElement(d.i,{className:b()(It.a.textContainer,de.a.flex)},e.loading?i.a.createElement("div",null):s),i.a.createElement(d.I,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(d.i,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(_t,null)))))}));var Pn,kn=i.a.memo(Gt),Cn=(Gt=n(975),n.n(Gt)),Rn=n(114),_n=n(108),Bn=(Gt=n(871),n.n(Gt)),Nn=(Gt=n(872),n.n(Gt)),Wn=(Gt=n(797),n.n(Gt)),Dn=(Gt=(n(1019),n(1020),n(1021),n(1022),n(985),n(986)),n.n(Gt)),Ln=(Gt=n(987),n.n(Gt)),Mn={"སྡེ་དགེ":"https://www.lotsawahouse.org/Images/Situ_Panchen.jpg","པེ་ཅིན།":"https://cdn.discordapp.com/attachments/959329505661554708/1034029050580172830/unknown.png","སྣར་ཐང༌།":"https://www.lotsawahouse.org/Images/Situ_Panchen.jpg"};function Hn(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.B,{sx:{fontSize:16,color:"rgba(0,0,0,0.5)"}}),i.a.createElement("div",{className:Ln.a.avatars},[{img:23},{img:34},{img:70}].map((function(e,t){return i.a.createElement("span",{className:Ln.a.avatar,key:"d-"+t},i.a.createElement("img",{src:"https://picsum.photos/".concat(e.img),alt:"index-image"}))}))),i.a.createElement(d.o,{label:"+".concat(Math.floor(100*Math.random())),size:"small",sx:{fontSize:11,height:11}}))}function zn(e){return((e=e.name).includes("མཉམ་འབྲེལ་པར་མ།།")||e.includes("Working"))&&(e="Working Edition"),i.a.createElement(d.g,{alt:"dege",src:Mn[e],sx:{width:24,height:24,bgcolor:function(e){for(var t=0,n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t);var r="#";for(n=0;n<3;n+=1){r+="00".concat((t>>8*n&255).toString(16)).slice(-2)}return r}(e),fontSize:10}},1<e.split(" ").length?"".concat(e.split(" ")[0][0]).concat(e.split(" ")[1][0]):"".concat(e[0]))}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e){e.data,(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?qn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(20),2))[0];var t=e[1];return i.a.createElement("div",{className:Dn.a.voteContainer,onClick:function(){return t((function(e){return e+1}))}},i.a.createElement(Hn,null))}function Fn(e){e.accuracy;var t=i.a.createElement("p",null,"<",i.a.createElement(L.a,{id:"annotation.delete"}),">"),n=(""!==(n=e.annotationData.content).trim()&&(250<n.length&&(n=n.substr(0,250)+"…"),t=i.a.createElement("p",{style:{minWidth:100,maxWidth:"30ch"}},n)),[Nn.a.annotationDetail]),r=(n=(e.isActive&&n.push(Nn.a.active),b.a.apply(void 0,n)),e.annotationData.name||e.user.name);return i.a.createElement("div",{className:n,onClick:e.selectAnnotationHandler},i.a.createElement(d.i,{className:Nn.a.annotationHeader,sx:{bgcolor:"secondary.light",color:"texts.main"}},i.a.createElement(zn,{name:r}),i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("h3",null,r),"པེ་ཅིན།"===r&&i.a.createElement("span",{className:Nn.a.date},"1738, month, day N/A"),"སྣར་ཐང༌།"===r&&i.a.createElement("span",{className:Nn.a.date},"1742, month, day N/A"),"སྡེ་དགེ"===r&&i.a.createElement("span",{className:Nn.a.date},"1744, month, day N/A")),e.isLoggedIn&&e.isActive&&i.a.createElement("button",{style:{display:"none"},className:Nn.a.edit,onClick:e.editAnnotationHandler,id:"editBtn"})),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t),i.a.createElement("div",{className:Nn.a.contentOptions},i.a.createElement(Vn,{data:e.annotationData})))}function Un(){return(Un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qn(e){return i.a.createElement("svg",Un({viewBox:"0 0 512 512"},e),Pn=Pn||i.a.createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}))}function Gn(e){var t=e.annotationData.content,n=[Nn.a.annotationDetail],r=null;e.isActive&&n.push(Nn.a.active),n=b.a.apply(void 0,n);return i.a.createElement("div",{className:n},i.a.createElement("h3",null,e.annotationData.name),i.a.createElement("div",{className:Nn.a.editing},i.a.createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){r.style.height="5px",r.style.height=r.scrollHeight+"px"},ref:function(e){return r=e}}),i.a.createElement("div",{className:Nn.a.actionButtons},i.a.createElement("div",{className:Nn.a.save,onClick:function(){r&&e.saveAnnotationHandler(r.value)}},i.a.createElement(Qn,{height:"0.8em",width:"0.8em",style:{fill:"currentColor",marginRight:6}}),i.a.createElement(L.a,{id:"annotation.save"})),i.a.createElement("div",{className:Nn.a.cancel,onClick:e.cancelAnnotationHandler},i.a.createElement(L.a,{id:"annotation.cancel"})))))}function $n(e){return i.a.createElement("div",{className:Jn.a.button,title:e.title,onClick:e.onClick},"+")}Gt=n(783);var Kn=n.n(Gt),Yn=(Gt=(n(67),n(988)),n.n(Gt)),Jn=(Gt=n(989),n.n(Gt));function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function er(e,t){return(er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Gt=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&er(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tr(e);n=t?(n=tr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Xn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e,t=null;return this.props.buttonOnClick&&(e=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"",t=i.a.createElement($n,{title:e,onClick:this.props.buttonOnClick})),i.a.createElement("h3",{className:Yn.a.heading},i.a.createElement("span",{className:Yn.a.title},i.a.createElement(L.a,{id:this.props.titleId})),t&&i.a.createElement("div",{className:Yn.a.button},t))}}])&&Zn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(c.c)(Gt),Gt=n(990);var nr=n.n(Gt),rr=(Gt=n(788),n.n(Gt));function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ar(e,t){return(ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cr=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ar(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lr(e);n=t?(n=lr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===or(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.note.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:nr.a.editorContainer},i.a.createElement("textarea",{className:nr.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:rr.a.buttonContainer},i.a.createElement("div",{className:rr.a.save,onClick:this.save.bind(this)},i.a.createElement(L.a,{id:"annotation.save"})),i.a.createElement("div",{className:rr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(L.a,{id:"annotation.cancel"}))))}}])&&ir(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),sr=(Gt=n(991),n.n(Gt)),ur=(Gt=(n(205),n(992)),n.n(Gt)),dr=(n(156),n(347));function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return(hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yr=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mr(e);n=t?(n=mr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===fr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:ur.a.answer},i.a.createElement("p",{className:Kn.a.text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),i.a.createElement("p",{className:Kn.a.subTitle},i.a.createElement(L.a,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",i.a.createElement(dr.FormattedDate,{value:this.props.answer.created})))}}])&&pr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t){return(vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Or=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xr(e);n=t?(n=xr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===gr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return wr(r)}}(r);function r(){var e,t=this,o=r;if(!(t instanceof o))throw new TypeError("Cannot call a class as a function");for(var i,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=function(){e.props.delete&&e.props.delete()},(i="delete")in(t=wr(e=n.call.apply(n,[this].concat(l))))?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,e}return t=r,(e=[{key:"render",value:function(){for(var e=this.props.question.topicId||null,t=u.g+e,n=[],r=this.props.question.answers,o=0;o<r.length;o++){var a=r[o];n.push(i.a.createElement(yr,{answer:a,key:"answer_"+a.created}))}var l=0<this.props.question.name.length?this.props.question.name:this.props.question.username;return i.a.createElement(d.i,{className:b()(sr.a.question,Kn.a.padding),sx:{boxShadow:2}},i.a.createElement("p",{className:Kn.a.text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("span",{className:b()(sr.a.threadLink,Kn.a.text)},i.a.createElement("a",{href:t,target:"_blank"},i.a.createElement(L.a,{id:"question.viewThread"}))),i.a.createElement(d.v,{"aria-label":"delete",size:"small",onClick:this.delete},i.a.createElement(f.j,{fontSize:"inherit"}))),i.a.createElement("p",{className:Kn.a.subTitle},l,i.a.createElement(dr.FormattedDate,{value:this.props.question.created})),i.a.createElement(X,{topicId:e}))}}])&&br(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Er=(Gt=n(993),n.n(Gt));function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jr(e,t){return(jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ar=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ir(e);n=t?(n=Ir(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Sr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.question.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"",t=this.props.defaultTitle+"[# ".concat(Date.now().toString().slice(-5,-1)," ]");this.props.saveQuestion(this.props.question,t,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:Er.a.editorContainer},i.a.createElement("div",null,this.props.questionQuote),i.a.createElement("textarea",{className:Er.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:rr.a.buttonContainer},i.a.createElement("div",{className:rr.a.save,onClick:this.save.bind(this)},i.a.createElement(L.a,{id:"annotation.save"})),i.a.createElement("div",{className:rr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(L.a,{id:"annotation.cancel"}))))}}])&&Tr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Pr=(Gt=n(994),n.n(Gt));function kr(e){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){return(Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Br=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_r(e);n=t?(n=_r(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===kr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:b()(Pr.a.loading,Kn.a.text)},i.a.createElement(l.a,{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}])&&Cr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Nr=(Gt=n(995),n.n(Gt));function Wr(e){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t){return(Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e){var t={};return t.backgroundColor=e.backgroundColor||"",t.color=e.color||"#fff",i.a.createElement("div",{className:Vr.a.accessory,title:e.title,onClick:e.onClick,style:t},Fr[e.type])}var zr=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mr(e);n=t?(n=Mr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Wr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return i.a.createElement(d.i,{className:Nr.a.note,sx:{boxShadow:2}},i.a.createElement("p",null,"Note:"),i.a.createElement("div",{className:Nr.a.header},i.a.createElement("h4",{className:Nr.a.info},this.props.note.creatorUser.name),this.props.delete&&i.a.createElement("div",{className:Nr.a.delete,onClick:this.delete.bind(this)},i.a.createElement(d.v,{"aria-label":"delete",size:"small"},i.a.createElement(f.j,{fontSize:"inherit"})))),i.a.createElement("div",{className:Nr.a.content,onClick:this.edit.bind(this)},this.props.note.content))}}])&&Dr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),qr=(Gt=n(996),n.n(Gt)),Vr=(Gt=n(997),n.n(Gt)),Fr={ADD:"+",DELETE:"×"};function Ur(e){var t=e.children,n=e.tooltipName,r=void 0===(r=e.format)?null:r,o=e.className,a=e.shortcut;e=e.on;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{"data-tip":!0,"data-for":n,className:void 0===o?"":o,style:{width:"100%"}},void 0!==e&&e?t:i.a.createElement(d.S,{placement:"top",followCursor:!0,title:r?i.a.createElement(L.a,{id:r}):i.a.createElement("span",null,n," [".concat(void 0===a?"":a,"]"))},t)))}function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $r(e,t){return($r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yr,Jr,Xr,Zr=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$r(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kr(e);n=t?(n=Kr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Qr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||Wn.a.mainTint,n=this.props.fontSize||"14px",r=this.props.noBezel?[qr.a.buttonNoBezel]:[qr.a.button],o=this.props.tooltipTitle||"",a=(r=(this.props.isActive&&r.push(qr.a.active),b.a.apply(void 0,r)),this.props.shortcut||"");n={fontSize:n,color:e,backgroundColor:t};return this.props.align&&(n.textAlign=this.props.align),i.a.createElement(Ur,{tooltipName:o,shortcut:a,on:this.props.disabled},i.a.createElement("button",{style:n,className:r,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&i.a.createElement("div",{className:qr.a.icon},this.props.icon),this.props.title&&i.a.createElement("span",{className:qr.a.title},this.props.title),this.props.accessoryType&&i.a.createElement(Hr,{type:this.props.accessoryType})))}}])&&Gr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function to(e){return i.a.createElement("svg",eo({viewBox:"0 0 30 40",fill:"currentColor"},e),Yr=Yr||i.a.createElement("path",{d:"M3 0h24v15H3z"}),Jr=Jr||i.a.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"}),Xr=Xr||i.a.createElement("path",{d:"M3 25h24v15H3z"}))}Gt=n(998);var no,ro,oo,io,ao=n.n(Gt);function lo(){return(lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function co(e){return i.a.createElement("svg",lo({viewBox:"0 0 24 24"},e),no=no||i.a.createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"}),ro=ro||i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}function so(){return(so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function uo(e){return i.a.createElement("svg",so({viewBox:"0 0 24 24",fill:"currentColor"},e),oo=oo||i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),io=io||i.a.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"}))}function fo(e){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t){return(ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mo(e);n=t?(n=mo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===fo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return n.call(this);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:ao.a.header},i.a.createElement(Zr,{noBezel:!0,icon:i.a.createElement(co,{width:15,height:15,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),i.a.createElement(Zr,{noBezel:!0,icon:i.a.createElement(uo,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),i.a.createElement(Zr,{noBezel:!0,color:"#fff",fontSize:"".concat(15,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),i.a.createElement(Zr,{noBezel:!0,icon:i.a.createElement(to,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),i.a.createElement(Zr,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:i.a.createElement(Qn,{width:15,height:15,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}])&&po(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vo(e,t){return(vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Gt=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wo(e);n=t?(n=wo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===go(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).controls=null,e.arrow=null,e.arrowDs=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,r=t.offsetWidth,o=this.arrow,i=e.bottomGap,a=i<0||n<i,l=e.top,c=e.viewPortWidth||0,s=e.left,u=s+e.width;if(o.style.display="none",this.props.selectedElementIds)for(var d=0,f=0,p=0;p<this.props.selectedElementIds.length;p++){var h,m,y=this.props.selectedElementIds[p];(y=document.getElementById(y))&&(m=(h=y.offsetLeft)+y.offsetWidth,h<d?(y.offsetTop,y.offsetHeight,s=h,u=f=m):f<m&&(f=m),h<s&&(s=h),u<m&&(u=m),d=h)}var g=u-s,b=3,v=!1,w=0;!a&&i<n&&(v=!0),(v=c-(s+g)<r+50||c-e.left<r+50||v)?(o.className=Kn.a.arrowLeft,b=s-r-o.offsetWidth<0?4:2):(s-(a=r/2-g/2)<0&&(w=Math.abs(s-a)),c<u+a&&(w=c-(u+a))),3===b?(a=c=0,this.arrow&&(this.arrow.className=Kn.a.arrowTop,a=r/2-this.arrow.offsetWidth/2-w,this.arrow.style.left=(a=a<0?0:a)+"px",c=this.arrow.offsetHeight,this.arrow.style.top=0-c+"px"),t.style.top=l-e.height-15+"px",t.style.left=e.left+"px"):v?(o.className=Kn.a.arrowRight,w=o.offsetHeight,a=e.top-e.height-15,e.top+e.height+i-a<n&&(a=e.top+e.height+i-n),2===b?(o.style.left=r-2+"px",t.style.left=s-r/2-o.offsetWidth+"px"):(o.className=Kn.a.arrowLeft,o.style.left=-o.offsetWidth+"px",t.style.left=s+g-r/2+o.offsetWidth+"px"),o.style.top=e.top-a+e.height/2-w/2+"px",t.style.top=a+"px"):t.style.top=l+"px"}}},{key:"getMeasurements",value:function(){var e,t,n,r,o,i,a,l,c,s,u,d;return this.props.selectedElementIds?(e=this.props.selectedElementIds[this.props.selectedElementIds.length-1],e=document.getElementById(e),s=this.props.selectedElementIds[0],s=document.getElementById(s),t=this.props.splitTextRect,n=0,this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(n=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),s?(n=s.offsetTop+n,r=s.offsetTop,o=s.offsetLeft,i=s.offsetWidth,a=s.offsetHeight,l=n,d=null,u=c=0,s&&t&&(s=s.getBoundingClientRect(),c=t.height-s.top),e&&t&&(s=e.getBoundingClientRect(),u=t.height+t.top-s.bottom,d=t.width),{top:n,textTop:r,rowTop:l,left:o,width:i,height:a,topGap:c,bottomGap:u,viewPortWidth:d}):(console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1})):null}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=[],a=[],l=null,c=null,s=r.user.isLoggedIn,u=!1,d=(r.activeAnnotation&&(r.activeAnnotation.isType(Lt.a.pageBreak)||r.activeAnnotation.isType(Lt.a.lineBreak))&&(u=!0),r.annotationsData?(r.annotationsData.map((function(e){var t,n=Math.round(99*Math.random())+1,l=!1,c=!1;e.isTemporary?c=l=!0:r.temporaryAnnotation||e.annotation.uniqueId!=r.activeAnnotation.uniqueId||(c=!0),l?(t=o.createElement(Gn,{annotationData:e,key:e.annotation.uniqueId,isActive:c,saveAnnotationHandler:function(t){r.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){r.cancelEditAnnotation(e.annotation)},isLoggedIn:s,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}}),a.push(t)):(t=o.createElement(Fn,{accuracy:n,annotationData:e,key:e.annotation.uniqueId,isActive:c,user:r.user,selectAnnotationHandler:function(){s&&!l&&r.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){s&&!l&&r.editAnnotation(e.annotation)},isLoggedIn:s}),i.push(t))}),this),r.user.isLoggedIn||(l=o.createElement("div",{className:Kn.a.anonymousMessage},o.createElement(L.a,{id:"annotations.loginMessage",values:{loginLink:o.createElement("a",{href:"/accounts/login/"},o.createElement(L.a,{id:"annotations.loginLink"}))}})))):c=o.createElement("div",{className:Kn.a.nothingSelected},"Nothing Selected"),null),f=!this.props.selectedWitness.isWorking,p=null,h=!this.props.selectedWitness.isWorking,m=(s&&!this.props.selectedWitness.isWorking&&(e=[],t=[],this.props.availableAnnotations&&(e=this.props.availableAnnotations.filter((function(e){return e.type===Lt.a.pageBreak&&e.creatorWitness.id===n.props.selectedWitness.id})),t=this.props.availableAnnotations.filter((function(e){return e.type===Lt.a.lineBreak&&e.creatorWitness.id===n.props.selectedWitness.id}))),0<e.length&&(d=o.createElement("div",{className:Kn.a.breakButtons},o.createElement(Zr,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(to,{width:20,height:20}),onClick:function(){n.props.deleteAnnotation(e[0])},isActive:!0,backgroundColor:Wn.a.activeButton})),f=!1),0<t.length&&(p=o.createElement("div",{className:Kn.a.breakButtons},o.createElement(Zr,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){n.props.deleteAnnotation(t[0])},isActive:!0,backgroundColor:Wn.a.activeButton})),h=!1),(h=!!f&&h)||(f=!1)),null),y={},g=(r.temporaryNotes&&0<r.temporaryNotes.length&&(m=r.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(y[e.basedOn.uniqueId]=e.uniqueId),o.createElement(cr,{note:e,key:t,saveNote:r.saveAnnotation,cancel:function(){return r.cancelEditAnnotation(e)}})}))),null),v=(r.notes&&0<r.notes.length&&(g=r.notes.filter((function(e){return!y.hasOwnProperty(e.uniqueId)})).map((function(e){var t="NOTE_"+e.uniqueId;return o.createElement(zr,{note:e,key:t,delete:n.props.deleteAnnotation,edit:n.props.editNote})}))),null),w={},x=(r.temporaryQuestions&&0<r.temporaryQuestions.length&&r.questionQuote&&(v=r.temporaryQuestions.map((function(e){w[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(Ar,{question:e,questionQuote:r.questionQuote,defaultTitle:r.selectedWitness.text.name,key:t,saveQuestion:r.saveQuestion,cancel:function(){return r.cancelEditAnnotation(e)}})}))),[]),O=!1;if(r.questions&&0<r.questions.length){for(var E=[],S=0;S<r.questions.length;S++){var T=r.questions[S];!w.hasOwnProperty(T.uniqueId)&&r.questionsData.hasOwnProperty(T.uniqueId)&&(r.questionsData[T.uniqueId].loading&&(O=!0),E=E.concat(r.questionsData[T.uniqueId].questions))}x=E.map((function(e,t){return e.annotationUniqueId,o.createElement(Or,{question:e,key:"question_"+e.annotationUniqueId,delete:function(){return n.props.deleteAnnotation(n.props.questions[t])}})}))}var j=null,I=(0<x.length&&(j=o.createElement("h3",{className:Kn.a.sectionHeading},"Questions")),null),A=(O&&(I=o.createElement(Br,null)),0===(null==(A=r.questions)?void 0:A.length)&&0===r.temporaryQuestions.length),P=[Kn.a.annotationControls],k=(r.inline&&P.push(Kn.a.inline),!0);(l||u)&&(k=!1),l=Nt.a.createPortal(o.createElement("div",{className:Kn.a.annotationContent},l,c,!u&&i,d,p,m,g,j,v,I,x),document.getElementById("annotation-portal"));return o.createElement("div",{className:b.a.apply(void 0,P),style:{maxWidth:150},ref:function(e){return n.controls=e},id:"annotation-control"},k&&o.createElement(yo,{addPageBreak:f?r.addPageBreak:null,addLineBreak:h?r.addLineBreak:null,addNote:s&&!m?function(){return r.addNote()}:null,addQuestion:A?r.addQuestion:null,closeAnnotation:r.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null!=e&&e.click()},userLoggedIn:s}),!u&&a,l,o.createElement("div",{className:Kn.a.arrow,ref:function(e){return n.arrow=e}}))}}])&&bo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);var xo=n(876),Oo=n.n(xo);function Eo(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function So(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e){return function(e){if(Array.isArray(e))return Ao(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Io(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Io(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Io(e,t){var n;if(e)return"string"==typeof e?Ao(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ao(e,t):void 0}function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Po(e,t,n,r){var o=[],i=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var a={},l=0;l<e.length;l++)!function(t){var n=e[t];t=n.content+n.start+t;n.isTemporary?(a[ko]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},i=i.filter((function(e){return e!==n.getSourceName()})),t=ko):i=a[t]?(a[t].name+=" "+S(n.getSourceName()),i.filter((function(e){return e!==n.getSourceName()}))):(a[t]={name:S(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},i.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?a[t].isWorking=!0:a[t].isWorking=!1}(l);i.unshift(n);var c=i;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==r?void 0:r.name)&&(c=i.filter((function(e){return"Dominant"!==e}))),o=Object.keys(a).reduce((function(e,t){return(t=a[t]).isWorking&&(t.name=c.reduce((function(e,t){return e+" "+S(t,";")}),"")),e.push(t),e}),[])}return o}var ko=-3,Co=Object(a.connect)((function(e,t){var n=y.gb(e),r=y.G(e),o=t.activeAnnotation,a=t.inline,l=y.I(e);if(l||r&&(l=y.mb(e,r.id)),!o||!l)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var c=function(e,t,n,r,o){return 0<(e=y.R(e,n.id,r,o,t)).length?e[0]:null}(e,Lt.a.variant,l,o.start,o.length),s=function(e,t,n,r){var o=[];n&&t.naturalId===n.naturalId||o.push(t),n&&o.push(n);var i=(a=jo(e.getPositionOfAnnotation(t),2))[0],a=a[1];if(i){a=i+a;var l,c=[];t.isInsertion?((l=r["i"+i])&&(c=c.concat(l)),(l=r[String(i)])&&(c=c.concat(l))):((l=r[String(i)])&&(c=l),(i=r[String(a)])&&(c=c.concat(i)));for(var s=0;s<c.length;s++){var u=c[s];u.start===t.start&&u.length===t.length?n&&u.naturalId===n.naturalId||o.push(u):e.activeWitness.isWorking||u.type!==Lt.a.pageBreak&&u.type!==Lt.a.lineBreak||o.push(u)}o=Le()(o,(function(e,t){return e.id===t.id}))}return o}(t.annotatedText,o,c,t.annotationPositions),u=Po(u=s.filter((function(e){return e.type===Lt.a.variant})),f=y.P(e),O=y.fb(e,"annotation.workingEdition","Working"),r),d=(r=null,o.id==Et.a?r=o:(E=(d=jo(t.annotatedText.getPositionOfAnnotation(o),2))[0],d=d[1],u=null===E||null===d?null:(E=Po([r=t.annotatedText.getBaseAnnotation(E,d)],f,O),[].concat(To(E),To(u)))),u&&u.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:!t.userCreated&&e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1})),s.filter((function(e){return e.type===Lt.a.note}))),f=y.R(e,l.id,o.start,o.length,Lt.a.note),p=s.filter((function(e){return e.type===Lt.a.question})),h={};if(0<p.length)for(var m=0;m<p.length;m++){var g=p[m],b=(h[g.uniqueId]={},y.vb(e,g));b=(h[g.uniqueId].loading=b,y.v(e,g.uniqueId));h[g.uniqueId].questions=b}var v,w,x,O,E=null,S=(0<(O=y.R(e,l.id,o.start,o.length,Lt.a.question)).length&&(S=O[0],w=(S=jo(t.annotatedText.getPositionOfAnnotation(S),2))[0],S=S[1],w&&(S=(w=jo(t.annotatedText.segmentedText.extractTextAroundPosition(w,S=S||w+1,["།"," "]),3))[0],v=w[1],w=w[2],x=document.location.href,E=i.a.createElement("blockquote",null,S,i.a.createElement("a",{href:x},v),w))),Object(y.W)(e));return{annotationsData:u,activeAnnotation:o,baseAnnotation:r,availableAnnotations:s,user:n,temporaryAnnotation:c,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:l,notes:d,temporaryNotes:f,questions:p,temporaryQuestions:O,questionsData:h,questionQuote:E,fontSize:S}}),null,(function(e,t,n){var r=t.dispatch;if(0<e.questions.length)for(var o=0;o<e.questions.length;o++){var i=e.questions[o],a=!0;(a=!(e.questionsData.hasOwnProperty(i.uniqueId)&&0<e.questionsData[i.uniqueId].questions.length&&!e.questionsData[i.uniqueId].loading)&&a)&&r(new m.gc(i))}function l(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(){var i=n.activeAnnotation,a=(i=new Lt.c(null,i.witness,i.end+1,0,null,t,e.selectedWitness,e.user),y.d(e.selectedWitness)),l=[];l.push(m.Zb(i)),l.push(m.Eb(i.uniqueId,a)),l.push(o?m.Rb(i):m.Rb(null)),r(Object(Q.batchActions)(l))}}function c(t,n){var o,i,a;t.isTemporary?(o=e.selectedWitness,o=y.d(o),(n=new Lt.c(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn)).isSaved=t.isSaved,i=[],a=null,a=n.isSaved?m.Sc:m.Zb,i.push(a(n)),i.push(m.Ac(t)),i.push(m.Eb(n.uniqueId,o)),n.type===Lt.a.variant&&i.push(m.Rb(n)),r(Object(Q.batchActions)(i))):console.warn("Tried to save a non-temporary annotation: %o",t)}return So(So(So({},e),n),{},{closeAnnotation:function(){var t;e.activeAnnotation&&(t=m.Rb(null),r(t))},didSelectAnnotation:function(t){var n=t.id==Et.a?e.baseAnnotation:Bn()(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null,o=[],i=e.selectedWitness,a=y.d(i);t.uniqueId!=e.activeAnnotation.uniqueId&&(i.isWorking?(t.id!=Et.a&&o.push(m.Eb(n.uniqueId,a)),e.activeAnnotation.id!=Et.a&&o.push(m.yc(e.activeAnnotation.uniqueId,a))):e.activeAnnotation.creatorWitness.id===i.id?(o.push(m.zc(e.activeAnnotation.uniqueId,a)),n.id!==Et.a&&o.push(m.Eb(n.uniqueId,a))):(n.creatorWitness.id===i.id?o.push(m.Fb(n.uniqueId,a)):n.id!==Et.a&&o.push(m.Eb(n.uniqueId,a)),e.activeAnnotation.id!==Et.a&&o.push(m.yc(e.activeAnnotation.uniqueId,a))),o.push(m.Rb(n)),r(Object(Q.batchActions)(o)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===Et.a?null:t;n=new Lt.b(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user);t.userCreated&&(n.uniqueId=t.uniqueId,n.isSaved=t.isSaved),r(m.Db(n,!0))},saveAnnotation:c,cancelEditAnnotation:function(e){var t;e.isTemporary?(t=m.Ac(e),r(t)):console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,o=y.d(n),i=[];i=t.userCreated?[m.bc(t,n),m.yc(t.uniqueId,o)]:[m.zc(t.uniqueId,o)],e.activeAnnotation.uniqueId===t.uniqueId&&i.push(m.Rb(null)),r(Object(Q.batchActions)(i))},addNote:function(){var t=n.activeAnnotation;t=new Lt.b(null,t.witness,t.start,t.length,"",Lt.a.note,e.selectedWitness,e.user);r(m.Db(t,!0))},editNote:function(t){t=new Lt.b(t,t.witness,t.start,t.length,t.content,Lt.a.note,e.selectedWitness,e.user),r(m.Db(t,!0))},addPageBreak:l(Lt.a.pageBreak),addLineBreak:l(Lt.a.lineBreak),addQuestion:function(){var t=n.activeAnnotation;t=new Lt.b(null,t.witness,t.start,t.length,"",Lt.a.question,e.selectedWitness,e.user);r(m.Db(t,!0))},saveQuestion:function(t,o,i){var a=((a=jo(n.annotatedText.getPositionOfAnnotation(t),2))[0],a[1],Oo.a.renderToStaticMarkup(e.questionQuote)+i);c(t,i),i=m.ac(t,o,a);r(i)}})}))(Gt);function Ro(e){return function(e){if(Array.isArray(e))return _o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?_o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_o(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bo=Object(o.memo)(Object(c.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:i.a.createElement(d.F,{onChange:function(n){pe()(t)||e.onSelectedWitness(t[n.target.value])},className:Ve.a.selectVersion,value:r,label:"Version",classes:{root:Ve.a.selectEmpty,select:Ve.a.selectOptions}},t.map((function(t,r){return t.id===e.activeWitness.id&&o.push(Ve.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null==(t=e.user)?void 0:t.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect-".concat(r),value:r,className:Ve.a.selectOptions},n)})))})));function No(e){return function(e){if(Array.isArray(e))return Lo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Do(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Do(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(e,t){var n;if(e)return"string"==typeof e?Lo(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lo(e,t):void 0}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xo=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=Wo(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=Wo(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,u=(e=Wo(Object(o.useState)(!1),2))[0],f=e[1],p=(e=null==s?void 0:s.name,Object(o.useRef)(new Qe.c({fixedHeight:!0,defaultHeight:40}))),h=[Ge.a.textlist],m=(Object(o.useEffect)((function(){var e;""===a&&r(No(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(No(e)))}),[a]),i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(Qe.b,{key:"optionvalues-".concat(t),cache:p.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){f(!1),c(a)}},i.a.createElement(d.i,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(d.T,{noWrap:!0},S(a.name)))))}),[n]));return i.a.createElement(d.q,{onClickAway:function(){return f(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(d.j,{onClick:function(){f((function(e){return!e})),!1===u&&h.push(Ge.a.open)},component:"div",variant:"outlined",sx:{textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},i.a.createElement(d.T,{noWrap:!0},e||"select Text here")),i.a.createElement(d.u,{in:u},i.a.createElement(d.i,{className:b()(h),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(d.Q,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"Search",variant:"standard",style:{width:"100%"}}),i.a.createElement(Qe.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(Qe.d,{width:t,height:e,rowHeight:30,deferredMeasurementCache:p.current,rowCount:n.length,rowRenderer:m})}))))))})),Gt=Object(a.connect)((function(e){return{texts:y.db(e),selectedText:y.G(e)}}),(function(e){return{onSelectedText:function(t){e(m.Ic(t))}}}))(xo);var Mo=i.a.memo(Gt);function Ho(e){return e=e.handleWindowSearch,i.a.createElement(d.v,{size:"small",variant:"text",onClick:e},i.a.createElement(f.x,null))}function zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?qo(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qo(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vo(e){var t=zo(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=zo(Object(te.a)("WindowOneFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",a)}),[]),i.a.createElement(d.q,{onClickAway:function(){return r(!1)}},i.a.createElement(d.i,{position:"relative"},i.a.createElement(d.v,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(tt,{height:20,width:20,fill:"currentColor"})),i.a.createElement(d.u,{in:n},i.a.createElement(d.E,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(nt,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(d.t,null),i.a.createElement(Fo,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:a}),i.a.createElement(d.D,{onClick:function(){return e.onExport()}},i.a.createElement(d.T,{variant:"subtitle2"},"Export Document"))))))}var Fo=function(e){var t=e.selectFont,n=(e=e.selectedfont,u.c||[]);return i.a.createElement(d.i,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function Uo(e){var t=e.changeShowTableContent,n=e.showTableContent;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.v,{onClick:function(){t(!n)}},n?i.a.createElement(f.h,null):i.a.createElement(f.s,null)))}function Qo(e){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $o(e,t){return($o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ko(e){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$o(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ko(e);n=t?(n=Ko(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Qo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new j.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var d=0;d<a.length;d++){var f=a[d];l<=s&&s<c&&(u+=f),s+=f.length}0<u.length&&(n=I()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&Go(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),Jo=(c=n(1001),n.n(c));function Xo(e){function t(e){var t=e.key,o=e.index,c=e.parent,u=(e=e.style,a[o]);return i.a.createElement(Qe.b,{key:"listkeys2-".concat(t),cache:s.current,parent:c,columnIndex:0,rowIndex:o},i.a.createElement("div",{className:Jo.a.searchListItem,onClick:function(){return n(l,u[0],r.length,l)},style:e},i.a.createElement(Yo,{string:u[1],highlightClass:Jo.a.highlight,searchTerm:r})))}var n=e.onSelectedSearchResult,r=e.searchValue,a=e.results,l=e.selectedText,c=Object(o.useRef)(),s=Object(o.useRef)(new Qe.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(Qe.d,{ref:c,height:n,rowCount:null==a?void 0:a.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function Zo(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?ti(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ti(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ni(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}xo=i.a.memo((function(e){var t=(s=ei(Object(o.useState)(""),2))[0],n=s[1],r=(s=ei(Object(o.useState)(!1),2))[0],a=s[1],l=(s=ei(Object(o.useState)(!1),2))[0],c=s[1],s=Object(o.useRef)(),u=Object(o.useRef)(),p=i.a.useRef(ze()((function(t){e.searchChanged(t)}),1e3)).current,h=Object(o.useCallback)((function(e){e.preventDefault(),p(t),c(!0)}),[t]),m=Object(o.useCallback)((function(){!1===r&&p(null),a(!r)}),[r]),y=(Object(o.useEffect)((function(){!0===r&&u.current.focus(),!1===r&&p(null)}),[r]),Object(o.useCallback)((function(){c(!1),p(null),n("")}),[])),g=Object(o.useMemo)((function(){return He()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),b=g?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(d.N,{ref:s,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(d.N,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(d.i,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Mo,null),i.a.createElement(Bo,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(d.k,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:qe.a.button_group_menu},i.a.createElement(d.t,{orientation:"vertical",variant:"middle",flexItem:!0}),i.a.createElement(Ho,{handleWindowSearch:m}),i.a.createElement(Vo,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Uo,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(d.r,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:h},i.a.createElement(d.N,{direction:"row",spacing:2,position:"relative"},i.a.createElement(d.Q,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:u,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(d.j,{variant:"outlined",size:"small",onClick:h,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(d.i,{sx:(Zo(s={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:3,overflowX:"hidden"},"boxShadow",3),Zo(s,"display",0===b.length?"none":"block"),s)},g&&0<b.length&&i.a.createElement(Xo,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:b,selectedText:e.selectedText}),i.a.createElement(d.v,{"aria-label":"closeButton",onClick:y,size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(f.i,{fontSize:"inherit"})))))))}));var ii=Object(a.connect)((function(e){var t,n,r=y.G(e),o=y.H(e),i=[],a=!1,l=(r&&(i=y.bb(e,r.id),(l=y.K(e,r.id))?(t=y.ib(e,l),a=y.q(e,l)):t=y.mb(e,r.id)),o&&(n=(l=y.L(e,o.id))?y.jb(e,l):y.nb(e,o.id)),y.W(e)),c=y.A(e);return{witnesses:i,selectedText:r,selectedText2:o,selectedWitness:t,selectedWitness2:n,textFontSize:l,exportingWitness:a,searchValue:c,showTableContent:y.N(e),searchResults:y.y(e,c)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return ri(ri(ri({},n),e),{},(oi(n={navigationButtonClicked:function(){t.dispatch(m.Xb(!e.textListIsVisible))},onSelectedWitness:function(e){r(m.Kc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(m.Vb(e))},onChangeWindowOpen:function(e){r(m.Qc(e))},onExport:function(){r(m.cc(e.selectedWitness.id,"docx"))}},"navigationButtonClicked",(function(){r(m.Xb(!e.textListIsVisible))})),oi(n,"changeIsAnnotating",(function(e){r(m.Hb(e)),!1===e&&(e=m.Rb(null),r(e),r(m.Rb(null)))})),oi(n,"searchChanged",(function(e){r(m.Sb(e))})),oi(n,"changeShowTableContent",(function(e){r(m.Oc(e))})),oi(n,"onSelectedSearchResult",(function(e,t,n,o){o&&o.id===e.id?r(m.Gc(e.id,t,n)):r(batchActions([m.Gc(e.id,t,n),m.Ic(e)]))})),n))}))(xo),ai=(Gt=n(1002),n.n(Gt)),li=Object(a.connect)((function(e){var t=y.t(e);return{alignmentData:y.i(e),selectedMedia:t,text:function(t){return y.S(e,t)},getWitness:function(t){return y.ib(e,t)}}}),(function(e){return{changeMediaSelection:function(t){return e(m.xc(t))},onChangeWindowOpen:function(t){e(m.Qc(t))},onSelectedSearchResult:function(t,n,r){e(m.Gc(t,n,r))},selectSecondWindowText:function(t){e(m.Qc(!0)),e(m.Jc(t))}}}))((function(e){e.getWitness;var t=e.alignmentData,n=e.text,r=e.selectSecondWindowText;return(e=(null==t?void 0:t.alignments.text)||[]).length?i.a.createElement(d.i,null,i.a.createElement(d.T,{variant:"h6",gutterBottom:!0,component:"div"},"Commentary"),e.map((function(e,t){return i.a.createElement("div",{key:"commentary-".concat(t),style:{cursor:"pointer"},onClick:function(){var e;e=n(2),r(e)}},n(2).name,e.target)}))):null}));function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si=Object(J.a)("div")((function(e){return ci({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(At.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(At.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),ui=Object(J.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),di=Object(J.a)(d.w)((function(e){return{color:"inherit","& .MuiInputBase-input":ci({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}})),fi=i.a.memo(Object(a.connect)((function(e){return{}}),(function(e){return{changeScrollToId:function(t){return e(m.Jb(t))}}}))((function(e){return i.a.createElement(d.i,{className:ai.a.TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(li,null),i.a.createElement(d.R,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(d.T,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(si,null,i.a.createElement(ui,null,i.a.createElement(f.x,null)),i.a.createElement(di,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(d.i,null,[{Id:1,Title:"chapter 1",segment_id:1},{Id:2,Title:"chapter 2",segment_id:400},{Id:3,Title:"chapter 3",segment_id:3e3}].map((function(t,n){return i.a.createElement(d.i,{key:"TableContent-"+n,sx:{cursor:"pointer",width:"fit-content","&:hover":{textDecoration:"underline"}},onClick:function(){return e.changeScrollToId({from:"table",id:t.segment_id})}},t.Title)}))))}))),pi=!0,hi=Object(a.connect)((function(e){return{activeAnnotation:Object(y.h)(e)}}))((function(e){var t=e.activeAnnotation,n=i.a.useRef(null),r=i.a.useCallback((function(e){var r=document.getElementById("s_".concat(null==t?void 0:t.start));r&&(r=r.getBoundingClientRect(),r=Math.floor(r.top-40),n.current.style.top=r+"px")}),[null==t?void 0:t.start]);return i.a.useEffect((function(){var e,o=document.getElementById("scroller");return pi||(o&&o.addEventListener("scroll",r),e=null==t?void 0:t.start,(e=document.getElementById("s_".concat(e)))&&(e=e.getBoundingClientRect(),e=Math.floor(e.top-40),n.current.style.top=e+"px")),pi=!1,function(){if(!o)return null;o.removeEventListener("scroll",r)}}),[null==t?void 0:t.start]),i.a.createElement("div",{id:"annotation-portal",ref:n,style:{position:"absolute",left:"97%",zIndex:10,maxWidth:300,width:"max-content",transition:"all 0.1s linear 0s"}})})),mi=n(1003);function yi(e){var t=e.children,n=e.cl;return Object(o.useEffect)((function(){var e=document.querySelector("."+n);Object(mi.a)(e,{margin:50,background:"rgba(0,0,0,0.4)",scrollOffset:200})}),[]),i.a.createElement(i.a.Fragment,null,t)}function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?vi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vi(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ei(e,t){return(Ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Si(e){return(Si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ti(e){return"s_"+e.start}function ji(e){return"ds_"+e.start}function Ii(e){return"i_"+e.start}function Ai(e){return"p_"+(e.end+1)}function Pi(e){return"l_"+(e.end+1)}var ki=String.fromCharCode(182),Ci=Oo.a.renderToStaticMarkup(i.a.createElement(to,null)),Ri=(c=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ei(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Si(e);n=t?(n=Si(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===gi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t.rangeSelect=[],t.theme=e.theme,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return xi(xi({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)],r=this.props.annotationPositions[Et.c+e.start]||[],o=this.props.annotationPositions[Et.b+e.start]||[],i=this.props.annotationPositions[Et.e+(e.end+1)]||[];e=this.props.annotationPositions[Et.d+(e.end+1)]||[];return(t=n||t).concat(r,o,i,e)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.start===t.start&&r.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"===e.tagName)this.props.selectedSegmentId("");else{var t=[],n=[],r=document.getSelection(),o=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(o),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var i=parseInt(e.id.replace("s_","")),a=Bn()(this.textAlignmentById,(function(e){return i>=e.start&&i<e.end}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r=Wt.a.textLine,o='<p class="'+r+'">';if(0===n.length)return{__html:o};for(var i=Wt.a.insertion,a=n[n.length-1].end+1,l=(e.annotationPositions[Et.c+a]&&(t=new Dt.a(a,""),n.push(t)),e.annotationPositions[Et.e+a]&&(t=new Dt.a(a,""),n.push(t)),e.annotationPositions[Et.d+a]&&(t=new Dt.a(a,""),n.push(t)),e.activeAnnotations||{}),c=Wt.a.highlight,s=Wt.a.activeHighlight,u=null,d={},f=0;f<n.length;f++){var p=n[f],h="",m=[],y=this.annotationsForSegment(p),g=null,v=!1,w=!1,x=!1,O=!1,E=null;if(y){for(var S,T=[],j=[],I=[],A=[],P=0,k=y.length;P<k;P++){var C,R=y[P];R.isInsertion?R.uniqueId in l?T.push(R):(C=R.start,d.hasOwnProperty(C)||(j.push(R),d[C]=R)):R.isDeletion?R.uniqueId in l&&A.push(R):R.type!==Lt.a.pageBreak||e.activeWitness.isWorking?R.type!==Lt.a.lineBreak||e.activeWitness.isWorking?I.push(R):O=R:E=R}0===T.length&&0<j.length&&(_=j[0],S=Ii(p),B=i,e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===_.start&&(B+=" "+Wt.a.selectedAnnotation),o+="<span id="+S+" key="+S+' class="'+B+'">'+_.content+"</span>"),0<A.length&&(g=e.getBaseAnnotation(S=A[0]).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===S.start&&e.activeAnnotation.length===S.length&&0===p.length&&(v=!0)),E&&e.activeAnnotation&&e.activeAnnotation.uniqueId===E.uniqueId&&(w=!0),O&&e.activeAnnotation&&e.activeAnnotation.uniqueId===O.uniqueId&&(x=!0),(0<I.length||0<T.length)&&(I.some((function(e){return"P"===e.type}))&&m.push(Wt.a.P_annotation),I.some((function(e){return"Q"===e.type}))&&(1<I.filter((function(e){return"Q"===e.type})).length&&m.push(Wt.a.Q_annotation_double),m.push(Wt.a.Q_annotation)),I.some((function(e){return"N"===e.type}))&&m.push(Wt.a.N_annotation),I.some((function(e){return"V"===e.type}))&&m.push(Wt.a.V_annotation))}if(p.start===a)break;var _,B=null,N=(0===p.length?(B=ji(p),m.push(Wt.a.removedByAnnotation),g&&(p=new Dt.a(p.start,g))):B=Ti(p),(this.segmentsContainSegment(e.selectedAnnotatedSegments,p)||v)&&m.push(Wt.a.selectedAnnotation),e.selectedSourceRange.includes(p.start)&&e.condition&&(_="light"===e.theme.palette.mode?Wt.a.selectedRangelight:Wt.a.selectedRangeDark,m.push(_)),e.selectedMedia.isVideoVisible&&e.isPanelLinked&&e.MediaInterval.source_segment&&e.MediaInterval.source_segment.start<p.start&&e.MediaInterval.source_segment.end>p.start&&m.push(Wt.a.mediaInterval),0<m.length&&(h='class="'+b.a.apply(void 0,m)+'"'),p.text);if(e.searchStringPositions){var W=p.start,D=W,L=(N="",c);e.selectedSearchResult&&e.selectedSearchResult.start<=D&&e.selectedSearchResult.start+e.selectedSearchResult.length>D&&(L=s);for(var M=0;M<p.text.length;M++){var H,z,q,V=p.text.charAt(M);D=W+M;u?((H=bi(u,2))[0],0===M&&(N+='<span class="'+L+'">'),D===H[1]?(N+=V+"</span>",u=null):M===p.text.length-1?N+=V+"</span>":N+=V):D in e.searchStringPositions?(z=(H=bi(e.searchStringPositions[D],2))[0],q=H[1],N+='<span class="'+L+'">'+V,M!==p.text.length-1&&D!==q||(N+="</span>"),D<q&&(u=[z,q])):N+=V}}o+="<span id="+B+" key="+B+" "+h+">"+N+"</span>",E&&(g=[Wt.a.pageBreak],w&&g.push(Wt.a.selectedAnnotation),v=' class="'+g.join(" ")+'" ',o+="<span id="+Ai(p)+" key="+Ai(p)+v+">"+Ci+"</span>"),O&&(m=[Wt.a.lineBreak],x&&m.push(Wt.a.selectedAnnotation),h=' class="'+m.join(" ")+'" ',o=o+"<span id="+Pi(p)+" key="+Pi(p)+h+">"+ki+'</span></p><p class="'+r+'">')}return this._renderedSegments=n,{__html:o+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return this.textAlignmentById=this.props.textAlignmentById,t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"render",value:function(){var e=this,t=[Wt.a.text],n=(0===this.props.row&&t.push(Wt.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Wt.a.textContainer},i.a.createElement("div",{className:b.a.apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}])&&Oi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(h.a)(c));function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){Wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Li(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Li(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hi(e,t){return(Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}parseInt(Kn.a.inlineWidth);var Vi="bdrcimg_pre",Fi={},Ui=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hi(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qi(e);n=t?(n=qi(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return zi(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.list=null,t.splitText=null,t.cache=new w.b({fixedWidth:!0}),t.splitTextRef=o.createRef(null),t.rowRenderer=t.rowRenderer.bind(zi(t)),t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.isPanelLinked=e.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.processProps(e),t.changeScrollToId=e.changeScrollToId,t.changeSyncIdOnClick=e.changeSyncIdOnClick,t.closeAnnotation=e.closeAnnotation,t.scrollJump=e.scrollJump,t.textAlignmentById=[],t.scrollEvent=t.scrollEvent.bind(zi(t)),t.selectedWindow=e.selectedWindow,t.condition=e.condition,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;var t;1===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),pe()(t)&&pe()([])||1===this.selectedWindow&&this.debouncedScroll(t))}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){var e;this._mouseDown=!1,this.activeSelection&&(e=(e=this.processSelection(this.activeSelection))||[],this.props.didSelectSegmentIds(e),this.activeSelection=null)}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null;var t=(e=e.getRangeAt(0)).startContainer;if(!(t=this.getNodeSegmentSpan(t))||!t.parentNode)return null;var n=this.getRangeNodes(e,t.parentNode),r=(0<n.length&&(r=n[0],e.startOffset===r.textContent.length&&n.shift()),e.endContainer);return(r=this.getNodeSegmentSpan(r))&&r.parentNode?(r&&t.parentNode!==r.parentNode?n=n.concat(this.getRangeNodes(e,r.parentNode)):0===e.endOffset&&n.pop(),t=[],(this.selectedNodes=n).reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),t),t):null}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],r=0,o=t.childNodes.length;r<o;r++){var i=t.childNodes[r];e.intersectsNode(i)&&n.push(i)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=Di(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===Lt.a.pageBreak&&--c,s.type===Lt.a.lineBreak&&--c,s.length,s.length,n=e.splitText.getTextIndexOfPosition(c),i=t.getBoundingClientRect()}var u=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){u=e.selectedAnnotatedSegments;for(var d=0;d<u.length;d++){var f=u[d];if(null===r&&f instanceof Dt.a){r=f;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=Ii(r),Ii):(o=Ti(r),Ti))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(o=ji(s=new Dt.a(c,"")),a=ji,u=[r=s]):e.activeAnnotation.isInsertion?(t=Di(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(o=Ii(s=new Dt.a(t,"")),a=Ii,u=[r=s]):e.activeAnnotation.type===Lt.a.pageBreak?(u=[r=new Dt.a(c+1,"")],l=[o=Ai(new Dt.a(c,""))]):e.activeAnnotation.type===Lt.a.lineBreak&&(u=[r=new Dt.a(c+1,"")],l=[o=Pi(new Dt.a(c,""))]));if(a)for(var p=0;p<u.length;p++){var h=u[p];h instanceof Dt.a&&(h=a(h),l.push(h))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(Lt.a.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(Lt.a.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof Dt.a&&e.push(t),e}),[]),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"scrollToIndex",value:function(e){var t=this.list,n=this.props.splitText.getTextIndexOfPosition(e);setTimeout((function(){t.scrollToRow(n),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Bt()((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.processProps(this.props),this.debouncedScroll=ze()((function(t){t.length&&e.changeScrollToId({id:null==(t=t[0])?void 0:t.start,from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=ze()((function(t){e.handleSelection(t)}),200).bind(this),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),2e3),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,a=this;this.Alignment=this.props.textAlignment,this.condition=this.props.condition,this.scrollToId=this.props.scrollToId,this.props.isAnnotating||(this.activeSelection=null),this.textAlignmentById=this.props.textAlignmentById,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&0<this.selectedNodes.length&&(t=this.selectedNodes,n=this.props.selectedAnnotatedSegments,setTimeout((function(){var e=document.createRange(),r=t[0],o=t[t.length-1],i=n[n.length-1];i instanceof Dt.a&&(i=document.getElementById(Ti(i)))&&(o=i),r instanceof Element&&o instanceof Element&&(r=document.getElementById(r.id),o=document.getElementById(o.id),r&&o&&(e.setStart(r,0),e.setEnd(o,o.childNodes.length),(i=document.getSelection())&&(a._modifyingSelection=!0,i.removeAllRanges(),i.addRange(e),a.selectedNodes=null)))}),0)),!this._didSetInitialScrollPosition&&this.list&&(r=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(o=this.getSelectedTextIndex(),setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),"table"==this.scrollToId.from&&this.scrollToId.id&&(i=this.scrollToId.id,this.scrollToIndex(i)),"video"==this.scrollToId.from&&this.scrollToId.id&&(i=this.scrollToId.id,this.scrollToIndex(i)),2===this.selectedWindow&&2==this.scrollToId.from&&this.condition&&null!==this.scrollToId.id&&(this.textAlignmentById=this.props.textAlignmentById||[],this.Alignment&&null!==(i=null==(i=this.textAlignmentById.find((function(e){return e.TStart===a.scrollToId.id})))?void 0:i.start)&&this.scrollToIndex(i)),this.targetId&&"ua"===this.scrollToId.from&&2===this.selectedWindow&&"ua"===this.scrollToId.id&&this.condition&&(i=null==(i=this.Alignment.alignment.find((function(e){return a.targetId>=e.target_segment.start&&a.targetId<e.target_segment.end})))||null==(i=i.source_segment)?void 0:i.start,this.scrollToIndex(i))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"calculateImageHeight",value:function(){var e,t,n=null;return this.imageHeight&&this.imageWidth&&(e=this.imageWidth/this.imageHeight,t=Kt.a.pechaImage,0<(t=document.getElementsByClassName(t)).length&&(n=t[0].offsetWidth/e)),n}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Di(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof Dt.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getBaseAnnotation",value:function(e){var t=Di(this.props.splitText.annotatedText.getPositionOfAnnotation(e),1)[0];return this.props.splitText.annotatedText.getBaseAnnotation(t=null===t?0:t,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Kt.a.splitText,ref:function(t){return e.splitText=t},key:i},o.createElement(v.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(x.a,{id:"scroller",width:1,ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,overscanRowCount:3,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getImageUrl",value:function(e){var t,n,r;return this.props.selectedWitness&&this.props.selectedWitness.properties?(t=(r=this.props.selectedWitness.properties)[Vi],n=r.bdrcimg_number,r=r.bdrcimg_suffix,"//iiif.bdrc.io/"+t+(Number(n)+e)+"."+r+"/full/full/0/default.jpg"):""}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((Fi=Fi.hasOwnProperty(r)?Fi:Wi({},r,{}))[r].hasOwnProperty(t)||(Fi[r]=Wi({},t,{})),Fi[r][t].hasOwnProperty(n))return Fi[r][t][n];for(var o=new j.a,i=e.getText(),a=null==(e=e.segments[0])?void 0:e.start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),d=0,f=null,p=0;p<u.length;p++){var h=u[p],m=d+(h.length-1);null!==f?f+(t.length-1)<=m&&(s[f+a]=[f+a,m+a],f=null):-1!==l.indexOf(d)?t.length===h.length?s[d+a]=[d+a,m+a]:t.length>h.length&&(f=d):f=null,d+=h.length}return Fi[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l=this,c="",s=(i.selectedWitness&&i.selectedWitness.properties&&i.selectedWitness.properties.hasOwnProperty(Vi)&&(c=this.getImageUrl(n)),{}),u=this.props.searchValue,d=(u&&0<u.length&&i.splitText&&(s=this.getStringPositions(i.splitText.texts[n],u,n)),i.showImages&&c?Kt.a.pechaImage:null),f=(e.height,{});i.showImages&&d&&this.calculatedImageHeight&&(f.height=this.calculatedImageHeight+"px"),e=Ni(Ni({},e),{},{height:e.height,cursor:this.props.isAnnotating?"text":"pointer"});return o.createElement(w.a,{columnIndex:0,parent:r,rowIndex:n,cache:a,key:t},o.createElement("div",{key:t,style:e,className:Kt.a.splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:Kt.a.splitTextRowContent},i.showImages&&c&&o.createElement("div",{className:d,style:f},o.createElement(yi,{cl:"zoomableImage-".concat(n)},o.createElement("img",{alt:"Text related Image",className:b()([Kt.a.image,"zoomableImage-".concat(n)]),src:c,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===l.imageWidth&&(l.imageWidth=e.target.naturalWidth,l.imageHeight=e.target.naturalHeight,l.calculatedImageHeight=null,window.setTimeout(l.updateList.bind(l),0))}}))),o.createElement(Ri,{segmentedText:i.splitText.texts[n],annotations:i.annotations,activeAnnotations:i.activeAnnotations,activeAnnotation:i.activeAnnotation,row:n,selectedSegmentId:i.selectedSegmentId,annotationPositions:i.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:u,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:s,fontSize:i.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition,isPanelLinked:this.props.isPanelLinked,selectedMedia:this.props.selectedMedia,MediaInterval:this.props.MediaInterval})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(Co,{annotationPositions:i.annotationPositions,annotatedText:i.splitText.annotatedText,activeAnnotation:i.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:d,splitText:i.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}])&&Mi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);function Qi(e){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $i(e,t){return($i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yi,Ji,Xi,Zi,ea=0,ta=(xo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$i(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ki(e);n=t?(n=Ki(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Qi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e;if(this instanceof r)return(e=n.call(this)).key=ea++,e.ref=i.a.createRef(),e.selectedWindow=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.text.name&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t,n=null;n=[this.props.annotatedText&&this.props.text&&!this.props.loading?(e=this.props.paginated?(e=this.props.pageBreaks,0===(t=Ro(e))[0]&&t.shift(),function(e){return t}):Object(jt.a)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),n=new Tt(this.props.annotatedText,e),i.a.createElement(Ui,{splitText:n,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,isAnnotating:this.props.isAnnotating,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,condition:this.props.condition,selectedMedia:this.props.selectedMedia,MediaInterval:this.props.MediaInterval})):i.a.createElement("div",{key:this.key})];return i.a.createElement(d.i,{sx:{bgcolor:"heading.main",color:"texts.main"},className:b()(It.a.textDetail,de.a.flex,de.a.flexColumn),key:this.key,ref:this.ref},i.a.createElement(ii,null),i.a.createElement(d.t,null),i.a.createElement(l.a,{loaded:!this.props.loading,zIndex:5}),i.a.createElement(d.i,{style:{display:"flex",height:"100%",width:"100%"}},i.a.createElement(d.i,{className:b()(It.a.textContainer,de.a.flex)},this.props.loading?i.a.createElement("div",null):n),i.a.createElement(d.I,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(d.i,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(fi,null)))),i.a.createElement(hi,null))}}])&&Gi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),n(101));function na(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||ia(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){var n;if(e)return"string"==typeof e?aa(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function la(e){return[e.start,e.length].join("-")}var ca=null,sa=Object(a.connect)((function(e){var t=Object(y.gb)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,r=Object(y.Y)(e),o=y.V(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:r,fontSize:u.a,textAlignmentById:o};var i,a,l,c=Object(y.G)(e),s={},d=(c&&(i=Object(y.mb)(e,c.id),a=Object(y.n)(e,c.id)),Object(y.C)(e)),f={},p=[],h=null,m=Object(y.h)(e),g=[],b={},v=[],w="",x=Object(y.A)(e),O=!1,E=!1,S=Object(y.W)(e);if(i&&c&&e.data.witnessAnnotationsById.hasOwnProperty(i.id)){s=Object(y.bb)(e,c.id),h=((l=(T=Object(y.K)(e,c.id))?Object(y.ib)(e,T):l)||(l=i).id,l.id!==i.id&&(O=!0,E=Object(y.wb)(e)),ta.d(e,l.id)),b=(T=oa(ta.c(e,l,i),2))[0],p=T[1];if(h&&(f=function(e,t){if(e===Yi&&t===Ji&&e.version===Zi)return Xi;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=oa(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=la(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=Et.c+a}i.isDeletion&&0<i.length&&(a=Et.b+a),i.type===Lt.a.pageBreak&&(a=Et.e+a),i.type===Lt.a.lineBreak&&(a=Et.d+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=la(i),r[o]=c)}}(o);return Ji=t,Xi=n,Zi=(Yi=e).version,n}(h,Object.values(p))),m&&h&&(m=ca&&ca.id===l.id?m:h.getAnnotation(m.start,m.length))&&(g=h.segmentsForAnnotation(m)),l&&a&&h){var T=e.data.witnessAnnotationsById[l.id],j=(T=Object.values(T),null);l.id!==a.id&&(j=Object(y.m)(e,i.id,Lt.a.pageBreak,a.id));for(var I=0,A=(v=function(e,t){var n=[];if(Cn()(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),t){var r=[];if(Cn()(t,(function(e){return r.push(e.start)})),r=r.sort((function(e,t){return e-t})),0===n.length)return r;if(n.length/r.length<.9)for(var o=n[n.length-1],i=0,a=r.length;i<a;i++){var l=r[i];o<l&&n.push(l)}}return n}(T,j)).length;I<A;I++){var P=v[I];(P=h.segmentAtOriginalPosition(P))instanceof Dt.a?v[I]=P.start:P instanceof Number&&(v[I]=P)}O&&(w="/static/images/texts/"+c.name+"/"+l.source.name+"/")}}ca=l;T=y.x(e),j=y.sb(e);var k=y.U(e),C=y.Q(e),R=y.M(e),_=(y.J(e),y.t(e)),B=y.ub(e),N=y.p(e);return{text:c,witnesses:s,workingWitness:i,baseWitness:a,annotations:p,loading:n,paginated:O,pageImagesVisible:E,annotatedText:h,selectedAnnotatedSegments:g,annotationPositions:f,activeAnnotations:ra({},b),activeAnnotation:m,pageBreaks:v,imagesBaseUrl:w,user:t,textListVisible:r,selectedWitness:l,selectedSearchResult:d,searchValue:x,fontSize:S,isSecondWindowOpen:B,isAnnotating:y.rb(e),textAlignment:k,textAlignmentById:o,scrollToId:T,syncIdOnClick:C,selectedWindow:R,selectedSourceRange:Object(y.E)(e),selectedTargetRange:Object(y.F)(e),searchResults:Object(y.y)(e,x),showTableContent:Object(y.N)(e),selectedMedia:_,MediaInterval:Object(y.u)(e),condition:N&&j&&B,isPanelLinked:j}}),null,(function(e,t,n){function r(e,t,n){var r=[],o=[],i=[];(e=d[e])&&(r=e.filter((function(e){return e.type===Lt.a.variant})),o=e.filter((function(e){return e.type===Lt.a.pageBreak})),i=e.filter((function(e){return e.type===Lt.a.lineBreak}))),e=Me()(r.concat(o,i),u.annotations,(function(e,t){return e.toString()==t.toString()})),o=null,o=0<e.length?e[0]:r&&0<r.length?(i=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];(!t||r.length>t.length)&&(t=r)}return t}(r),r=(e=oa(u.getPositionOfAnnotation(i),2))[0],e=e[1],i&&i.isInsertion&&(e=0),u.getBaseAnnotation(r,e)):u.getBaseAnnotation(t,n);s(Object(m.Rb)(o))}function o(e){return-1!==e.indexOf("i_")}function i(e){return-1!==e.indexOf("ds_")}function a(e){return-1!==e.indexOf("p_")}function l(e){return-1!==e.indexOf("l_")}function c(e){return!o(e)&&i(e)?e.substr(3):e.substr(2)}var s=t.dispatch,u=e.annotatedText,d=e.annotationPositions;return ra(ra(ra({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,r=[],a=[],l=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=ia(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(l.s();!(n=l.n()).done;){var f,p,h,y=n.value;i(y)||o(y)||(f=c(y),p=u.segmentedText.segmentAtPosition(f),a.push(p),(h=d[p.start])&&(r=r.concat(h)))}}catch(t){l.e(t)}finally{l.f()}r=Le()(r,(function(e,t){return e.toString()==t.toString()}));var g,b,v=Me()(r,u.annotations,(function(e,t){return e.toString()==t.toString()})),w=function(e,t,n,r){if(0===e.length)return null;for(var o=e[0],i=(e=e[e.length-1],o.start),a=e.end,l=null,c=null,s=0;s<n.length;s++){var u=n[s],d=null,f=(p=oa(r.getPositionOfAnnotation(u),2))[0],p=p[1];-1!==t.indexOf(u)?(f&&f<i&&(i=f,l=u),(d=f+p-1)&&a<d&&(c=a=d)):a<(d=f+p-1)&&(a=d)}return{start:i,length:a-i+1,annotation:l&&c&&l===c?l:null}}(a,v,r,e.annotatedText);w?(g=u.getBaseAnnotation(w.start,w.length),null,b=w.annotation||(0<v.length?(v=u.segmentedText.segmentsInRange(w.start,w.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Lt.c(Et.f,function(e){var t=new Rn.b(Et.f,Rn.a);return e=new _n.a(e.id,e.name),new Fe.a(Et.f,e,t,"",!1)}(e.text),g.start,g.length,v,Lt.a.variant,e.selectedWitness,e.user)):g),s(Object(m.Rb)(b))):console.warn("No range for selected segment ids: %o",t)}},selectedSegmentId:function(t){var n,f=c(t),p=f;o(t)?p=Et.c+f:i(t)?p=Et.b+f:a(t)?p=Et.e+f:l(t)&&(p=Et.d+f),d[p],""===t?e.activeAnnotation&&(n=m.Rb(null),s(n)):o(t)||i(t)||a(t)||l(t)?r(p,f,0):(n=Number(c(t)),(p=u.segmentedText.segmentAtPosition(n))&&r(p.start,p.start,p.length))},changeScrollToId:function(e){return s(m.Jb(e))},changeSyncIdOnClick:function(e){return s(m.Mb(e))},changeSelectedImage:function(e){s(m.Cc(e))},changeSelectedWindow:function(e){s(m.Lb(e))},changeSelectedRange:function(e){s(m.Kb(e))},changeShowTableContent:function(e){s(m.Oc(e))},closeAnnotation:function(){var e=m.Rb(null);s(e)}})}))(xo);function ua(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function da(e,t,n){var r,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=y.I(e),a=y.h(e);!a||a.isType(Lt.a.pageBreak)||a.isType(Lt.a.lineBreak)||(r=null,i&&(r=ta.d(e,i.id)),e=y.gb(e),a&&i&&r&&e&&(a=new Lt.c(null,a.witness,a.end+1,0,null,n,i,e),pa(r,a)||(n=y.d(i),(e=[]).push(m.Zb(a)),e.push(m.Eb(a.uniqueId,n)),e.push(o?m.Rb(a):m.Rb(null)),t(Object(Q.batchActions)(e)))))}function fa(e,t,n){var r,o=e.getAnnotationsOfType(t);for(r in o)if(o.hasOwnProperty(r)&&n===o[r].start)return!0;return!1}var pa=function(e,t){return fa(e,Lt.a.pageBreak,t.start)||fa(e,Lt.a.lineBreak,t.start)},ha=(ua(Gt={Escape:function(e,t){y.h(e)&&t(m.Rb(null))}},"shift-Enter",(function(e,t){da(e,t,Lt.a.pageBreak)})),ua(Gt,"Enter",(function(e,t){da(e,t,Lt.a.lineBreak)})),ua(Gt,"ArrowLeft",(function(e,t){var n,r,o,i=y.I(e),a=y.h(e),l=null;i&&(l=ta.d(e,i.id)),i&&a&&l&&0!==a.start&&(n=a.start-1,(n=l.segmentAtOriginalPosition(n))&&n instanceof Dt.a?o=n.start:n&&"number"==typeof n&&(l.annotationsForPosition(n),0<(r=l.segmentsForAnnotation(a)).length&&(o="number"==typeof r[0]?r[0]:r[0].start)),void 0===o?console.warn("Can't get previous segment before %o",a):(r=null,!(r=0<(a=l.annotationsForPosition(o)).length&&(r=a[0]).isDeletion&&n&&n instanceof Dt.a?null:r)&&n&&n instanceof Dt.a&&(a=l.getBaseAnnotation(o,n.length),l=y.mb(e,i.text.id),o=y.gb(e),a&&l&&o&&n&&(r=new Lt.c(Et.f,l,a.start,a.length,n.text,Lt.a.variant,i,o))),r&&t(m.Rb(r))))})),ua(Gt,"ArrowRight",(function(e,t){var n,r,o,i=y.I(e),a=y.h(e),l=null;i&&(l=ta.d(e,i.id)),i&&a&&l&&(a.isDeletion?(r=a.end+1,(r=l.segmentAtOriginalPosition(r))&&r instanceof Dt.a&&(o=r.start)):o=("number"==typeof(r=l.segmentsForAnnotation(a))[0]?r[0]:r[0].start)+a.content.length,void 0===o?console.warn("Can't get next segment after %o",a):(r=l.annotationsForPosition(o),n=null,0<(r=a.isDeletion?r.filter((function(e){a.uniqueId,e.uniqueId})):r).length?n=r[0]:(r=l.segmentedText.segmentAtPosition(o))&&(l=l.getBaseAnnotation(o,r.length),o=y.mb(e,i.text.id),e=y.gb(e),l&&o&&e&&r&&(n=new Lt.c(Et.f,o,l.start,l.length,r.text,Lt.a.variant,i,e))),n&&t(m.Rb(n))))})),ua(Gt,"shift-ArrowRight",(function(e,t){var n,r,o,i=y.I(e),a=y.h(e),l=null;i&&(l=ta.d(e,i.id)),i&&a&&l&&(a.isDeletion||(o=("number"==typeof(o=l.segmentsForAnnotation(a))[0]?o[0]:o[0].start)+a.content.length,n=null,0<(r=l.annotationsForPosition(o)).length?n=r[0]:(r=l.segmentedText.segmentAtPosition(o))&&(l=l.getBaseAnnotation(o,r.length),o=y.mb(e,i.text.id),e=y.gb(e),l&&o&&e&&r&&(n=new Lt.c(Et.f,o,l.start,l.length,r.text,Lt.a.variant,i,e))),n&&(o=new Lt.c(Et.f,n.witness,a.start,a.length+n.length,a.content+n.content,a.type,a.creatorWitness,a.creatorUser),t(m.Rb(o)))))})),ua(Gt,"shift-ArrowLeft",(function(e,t){var n=y.I(e),r=y.h(e),o=null;n&&(o=ta.d(e,n.id)),n&&r&&!r.isSaved&&o&&(r.isDeletion||1!==(e=o.segmentsForAnnotation(r)).length&&(e.pop(),n=e.reduce((function(e,t){return t instanceof Dt.a&&(e+=t.text),e}),""),o=new Lt.c(Et.f,r.witness,r.start,n.length,n,r.type,r.creatorWitness,r.creatorUser),t(m.Rb(o))))})),Gt);function ma(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ga=Object(a.connect)((function(e){var t=y.ub(e),n=y.t(e);return{state:e,selectedText:y.G(e),isSecondWindowOpen:t,Media:n}}),null,(function(e,t,n){return ya(ya({dispatch:t.dispatch},n),e)}))((function(e){var t=Object(o.useRef)(null);return i.a.createElement(d.i,{ref:t,sx:{display:"flex",flexDirection:"column",width:"100%",height:e.bodyHeight,position:"relative"},onKeyDown:function(t){var n=e.state,r=e.dispatch;t=function(e){var t=e.key;return e.shiftKey?"shift-"+t:t}(t),ha.hasOwnProperty(t)&&ha[t](n,r)}},i.a.createElement(De.a,{size:e.isSecondWindowOpen&&e.selectedText?"50%":"100%",pane1Style:{display:"flex",justifyContent:"center"},resizerStyle:{display:e.isSecondWindowOpen?"block":"none"},onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))}},i.a.createElement(We,null,i.a.createElement(sa,null)),e.isSecondWindowOpen&&e.selectedText?i.a.createElement(We,null,i.a.createElement(kn,null)):i.a.createElement("div",null)),e.Media.isPanelVisible&&i.a.createElement(We,null,i.a.createElement(Ce,null)))}));function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var va=Object(a.connect)((function(e){var t,n,r=y.G(e),o=y.H(e);return r&&(y.bb(e,r.id),t=(t=y.K(e,r.id))?y.ib(e,t):y.mb(e,r.id)),o&&(y.cb(e,o.id),n=(n=y.L(e,o.id))?y.jb(e,n):y.nb(e,o.id)),{selectedText:r,selectedWitness:t,selectedText2:o,selectedWitness2:n,title:y.fb(e,"header.title"),page:e.page,isAnnotating:y.rb(e),isSecondWindowOpen:y.ub(e),theme:y.eb(e),isPanelLinked:y.sb(e),textListIsVisible:y.Y(e),isPanelVisible:y.tb(e)}}),(function(e){return{onChangedTextWidth:function(t){e(m.Yb(t))},onChangedTextListVisible:function(t){e(m.Xb(t))},changeIsAnnotating:function(t){e(m.Hb(t)),!1===t&&(t=m.Rb(null),e(t),e(m.Rb(null)))},onChangeWindowOpen:function(t){e(m.Qc(t))},onChangePanelLink:function(t){e(m.Ib(t))}}}))((function(e){function t(e,t){"clickaway"!==t&&l(!1)}var n=[ue.a.listContainer],r=(u.f,u.e,function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?ba(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ba(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!1),2)),a=r[0],l=r[1];return u.b,e.textListWidth,e.textListIsVisible?n.push(ue.a.showListContainer):n.push(ue.a.hideListContainer),r="calc(100vh - "+K.a.headerHeight+")",n=[{icon:i.a.createElement(f.k,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:i.a.createElement(f.A,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:i.a.createElement(f.z,null),name:"Share",function:function(){var t=e.selectedText,n=e.selectedText2,r=e.selectedWitness,o=e.selectedWitness2,i=n&&o?window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id,"/texts2/").concat(n.id,"/witnesses2/").concat(o.id):window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id);navigator.clipboard.writeText(i).then().catch((function(e){return console.log(e.message)})).finally((function(){return l(!0)}))}},{icon:i.a.createElement(f.C,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}],Object(o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),i.a.createElement("div",{className:b()(ue.a.interface,de.a.flex)},i.a.createElement(le,null),i.a.createElement(ga,{bodyHeight:r}),i.a.createElement(d.K,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:i.a.createElement(d.M,null)},n.map((function(e){return i.a.createElement(d.L,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),i.a.createElement(d.J,{open:a,autoHideDuration:6e3,onClose:t},i.a.createElement(d.d,{onClose:t,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))})),wa=(J=n(836),n.n(J)),xa=(h=n(1004),n.n(h));function Oa(e){var t=e.setFiltered,n=void 0===(e=e.featureText)?[]:e;return Object(o.useEffect)((function(){t(n)}),[]),i.a.createElement(d.N,{direction:{md:"row",xs:"column"},justifyContent:"space-around",alignItems:{md:"center"},gap:2,mx:{md:3},sx:{boxShadow:3,padding:2}},i.a.createElement(d.T,null,"Filter"),i.a.createElement(d.i,{flex:1},i.a.createElement(Ea,{handleChange:function(e){t(e.target.value)}})))}f.g,f.f;var Ea=function(e){return e=e.handleChange,i.a.createElement(d.Q,{id:"search-bar",className:"text",onInput:e,label:"Title",variant:"outlined",placeholder:"Search...",size:"small"})},Sa=n(1024),Ta=n.p+"b81eedeb7a90a13b48c4a1185a58ca30.png";function ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ia(){return i.a.createElement(d.H,{sx:ja({marginTop:"calc(10% + 60px)",width:"100%",position:"fixed",bottom:0},"width","100%"),component:"footer",square:!0,variant:"outlined"},i.a.createElement(d.N,{sx:{width:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",bottom:0}},i.a.createElement(d.i,{sx:ja({height:"100%",display:"flex",background:"#292826",width:"100%",alignItems:"center",justifyContent:"center"},"height",55)},i.a.createElement(d.T,{textAlign:"center",variant:"h6",fontSize:{md:"20px",xs:"10px"},textTransform:"capitalize",color:"white"},"Our Trusted partner"),i.a.createElement("img",{src:Ta,alt:"indrajala logo",style:{objectFit:"contain",maxHeight:"100%",marginLeft:"40px"}}))))}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pa=function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Aa(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(1),2),r=n[0],i=n[1],a=Math.ceil(e.length/t);return{next:function(){i((function(e){return Math.min(e+1,a)}))},prev:function(){i((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);i((function(e){return Math.min(t,a)}))},currentData:function(){var n=(r-1)*t;return e.slice(n,n+t)},currentPage:r,maxPage:a}};function ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ca(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ca(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}c=i.a.memo((function(e){var t=((e=e.Textdata).activeText,e.detail),n=(e=ka(Object(o.useState)(1),2))[0],r=e[1];console.log(t);var a=(e=ka(Object(o.useState)(t),2))[0],l=e[1],c=(e=ka(Object(o.useState)(!1),2))[0],s=e[1],u=(e=ka(Object(o.useState)(""),2))[0],p=(e=e[1],Math.ceil(a.length/4)),h=Pa(a,4)||[],m=i.a.useCallback((function(){s((function(e){return!e}))}),[]),y=i.a.useRef(null);return Object(o.useEffect)((function(){var e=[];e=null!==u?null==t?void 0:t.filter((function(e){return""===u||u===[]?e:e.title.includes(u)})):t;l(e.sort((function(e,t){return(null==e?void 0:e.order)-(null==t?void 0:t.order)})))}),[u,t]),i.a.createElement(d.N,{sx:{height:"100vh"}},i.a.createElement(d.i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"4rem"},m:4},i.a.createElement("h3",{className:xa.a.title,mx:3},i.a.createElement(L.a,{id:"library"})),i.a.createElement(d.v,{onClick:m},i.a.createElement(f.n,null))),i.a.createElement(d.r,{in:c},i.a.createElement(Oa,{setFiltered:e})),i.a.createElement(d.s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},4<a.length&&i.a.createElement(d.G,{count:p,size:"small",page:n,variant:"outlined",shape:"rounded",onChange:function(e,t){r(t),h.jump(t)},sx:{alignSelf:"flex-end",marginTop:2}}),i.a.createElement(d.i,{mt:2,py:1,display:"flex"},i.a.createElement(Sa.a.div,{layout:!0},i.a.createElement(d.N,{sx:{flexWrap:"wrap",gap:1},pb:2,direction:"row",className:xa.a.list,ref:y},h.currentData().map((function(e,t){return i.a.createElement(d.i,{key:e.id||"filteredData-".concat(t),sx:{width:"auto",scrollSnapAlign:"start"}},i.a.createElement(d.S,{title:e.description},i.a.createElement(Sa.a.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},layout:!0},i.a.createElement(wa.a,{to:"/texts/".concat(e.text),style:{textDecoration:"none"}},i.a.createElement(d.l,{sx:{cursor:"pointer",textDecoration:"none"},elevation:3,key:e.id},i.a.createElement(d.m,null,i.a.createElement(d.T,{gutterBottom:!0,variant:"h6",textAlign:"center",textTransform:"capitalize",fontWeight:"bold",width:"max-content"},S(e.title))))))))})))))),i.a.createElement(Ia,null))}));var Ra=Object(a.connect)((function(e){return-1===!e.user.userId&&e.user,{text:y.db(e),title:y.fb(e,"header.title"),Textdata:y.ab(e)}}),(function(e){return{onChangedTextWidth:function(t){e(m.Yb(t))},onChangedTextTitle:function(t){e(m.Ec(t))},dispatch:e}}))(c);function _a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(1009);var Wa=[{annotationId:"234241weq",annotationContent:"sad",voteCount:20},{annotationId:"12312weq",annotationContent:"happy",voteCount:40}],Da=Object(a.connect)((function(e){return console.log(e),{user:"hi"}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Na(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(Wa),2),n=t[0],r=t[1];return i.a.createElement(d.i,{sx:{display:"flex",flexDirection:"column",gap:2,marginTop:2}},n.map((function(e,t){return i.a.createElement(d.i,{sx:{display:"flex",alignItems:"center"},key:e.annotationId},i.a.createElement(d.h,{badgeContent:e.voteCount,color:"primary"},i.a.createElement(d.o,{label:e.annotationContent,onClick:function(){var t,o;t=e.annotationId,o=n.map((function(e){return e.annotationId===t?Ba(Ba({},e),{},{voteCount:e.voteCount+1}):e})),r(o)}})))})))})),La=function(){return i.a.createElement(Ra,null)},Ma=function(){return i.a.createElement(va,null)},Ha=function(){return i.a.createElement(Da,null)},za=function(){return i.a.createElement("h3",null,"404")},qa=["page","direction"];function Va(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}t.default=Object(a.connect)((function(e){var t=e.page;return e.direction,{page:t,isLoading:!Va(e,qa).data.loadedInitialData}}))((function(e){var t=e.page;return e.isLoading,i.a.createElement(r[t],null)}))},764:function(e,t,n){"use strict";var r=n(799),o=(n.d(t,"k",(function(){return r.a})),n(800)),i=(n.d(t,"z",(function(){return o.a})),n(801)),a=(n.d(t,"C",(function(){return i.a})),n(802)),l=(n.d(t,"A",(function(){return a.a})),n(803)),c=(n.d(t,"y",(function(){return l.a})),n(804)),s=(n.d(t,"r",(function(){return c.a})),n(805)),u=(n.d(t,"w",(function(){return s.a})),n(806)),d=(n.d(t,"s",(function(){return u.a})),n(807)),f=(n.d(t,"g",(function(){return d.a})),n(808)),p=(n.d(t,"f",(function(){return f.a})),n(809)),h=(n.d(t,"q",(function(){return p.a})),n(810)),m=(n.d(t,"l",(function(){return h.a})),n(811)),y=(n.d(t,"u",(function(){return m.a})),n(812)),g=(n.d(t,"p",(function(){return y.a})),n(813)),b=(n.d(t,"v",(function(){return g.a})),n(814)),v=(n.d(t,"b",(function(){return b.a})),n(815)),w=(n.d(t,"m",(function(){return v.a})),n(816)),x=(n.d(t,"i",(function(){return w.a})),n(817)),O=(n.d(t,"o",(function(){return x.a})),n(818)),E=(n.d(t,"t",(function(){return O.a})),n(819)),S=(n.d(t,"a",(function(){return E.a})),n(820)),T=(n.d(t,"d",(function(){return S.a})),n(821)),j=(n.d(t,"c",(function(){return T.a})),n(822)),I=(n.d(t,"n",(function(){return j.a})),n(823)),A=(n.d(t,"x",(function(){return I.a})),n(824)),P=(n.d(t,"j",(function(){return A.a})),n(825)),k=(n.d(t,"B",(function(){return P.a})),n(826)),C=(n.d(t,"h",(function(){return k.a})),n(827));n.d(t,"e",(function(){return C.a}))},783:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=(i=o(Object(r.useState)((function(){return n=e,r=t,(n=JSON.parse(localStorage.getItem(n)))||r;var n,r})),2))[0],i=i[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(n))}),[n]),[n,i]}},788:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},795:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","header-height":"40px",mainTint:"#024279",activeButton:"#00746b",headerHeight:"40px",header:"Header---header",logo:"Header---logo",navigationButton:"Header---navigationButton",loginButton:"Header---loginButton",ButtonText:"Header---ButtonText",buttonLink:"Header---buttonLink",controls:"Header---controls"}},797:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}},845:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},862:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"TextDetailHeading---button_group_menu"}},863:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},866:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},867:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},869:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",N_annotation:"Text---N_annotation",V_annotation:"Text---V_annotation",Q_annotation:"Text---Q_annotation",Q_annotation_double:"Text---Q_annotation_double",P_annotation:"Text---P_annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage",mediaInterval:"Text---mediaInterval"}},870:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},872:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b","annotation-desc":"AnnotationDetail---annotation-desc",annotationDetail:"AnnotationDetail---annotationDetail",date:"AnnotationDetail---date",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",contentOptions:"AnnotationDetail---contentOptions",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},884:function(e,t,n){var r={".":785,"./":785,"./index":785,"./index.js":785};function o(e){return e=i(e),n(e)}function i(e){if(n.o(r,e))return r[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(r)},o.resolve=i,(e.exports=o).id=884},891:function(e,t,n){e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},906:function(e,t,n){e.exports={container:"LoadMore---container"}},907:function(e,t,n){e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},908:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",Resources:"Sidebar---Resources",ResourceDetail:"Sidebar---ResourceDetail",optionlist:"Sidebar---optionlist","css-heg063-MuiTabs-flexContainer":"Sidebar---css-heg063-MuiTabs-flexContainer",listContainer:"Sidebar---listContainer",sidebar:"Sidebar---sidebar",menu_title:"Sidebar---menu_title",sidebar_header:"Sidebar---sidebar_header"}},909:function(e,t,n){},911:function(e,t,n){},912:function(e,t,n){e.exports={Dictionary:"ResourceOption---Dictionary"}},913:function(e,t,n){e.exports={container:"Editor---container",interface:"Editor---interface",listContainer:"Editor---listContainer",showListContainer:"Editor---showListContainer",hideListContainer:"Editor---hideListContainer"}},944:function(e,t,n){e.exports={time_stamp:"Chapters---time_stamp",active_stamp:"Chapters---active_stamp",dot:"Chapters---dot",image:"Chapters---image",chapter_info:"Chapters---chapter_info",topic:"Chapters---topic",startTime:"Chapters---startTime"}},950:function(e,t,n){e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}},973:function(e,t,n){e.exports={fontSize:"FontSize---fontSize"}},974:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},985:function(e,t,n){e.exports={shareContainer:"Sharebutton---shareContainer",shareButton:"Sharebutton---shareButton",facebookButton:"Sharebutton---facebookButton",whatsappButton:"Sharebutton---whatsappButton"}},986:function(e,t,n){e.exports={voteBtn:"Vote---voteBtn",number:"Vote---number",voteContainer:"Vote---voteContainer"}},987:function(e,t,n){e.exports={avatars:"AnnotationAvatar---avatars",avatar:"AnnotationAvatar---avatar"}},988:function(e,t,n){e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},989:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},990:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},991:function(e,t,n){e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},992:function(e,t,n){e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},993:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},994:function(e,t,n){e.exports={loading:"QuestionsLoading---loading"}},995:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},996:function(e,t,n){e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},997:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},998:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}}}]);